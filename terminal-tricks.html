<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Bash-Oneliner | A collection of handy Bash One-Liners and terminal tricks for data processing and Linux system maintenance.</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Bash-Oneliner" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A collection of handy Bash One-Liners and terminal tricks for data processing and Linux system maintenance." />
<meta property="og:description" content="A collection of handy Bash One-Liners and terminal tricks for data processing and Linux system maintenance." />
<link rel="canonical" href="https://onceupon.github.io/Bash-Oneliner/" />
<meta property="og:url" content="https://onceupon.github.io/Bash-Oneliner/" />
<meta property="og:site_name" content="Bash-Oneliner" />
<script type="application/ld+json">
{"@type":"WebSite","url":"https://onceupon.github.io/Bash-Oneliner/","name":"Bash-Oneliner","headline":"Bash-Oneliner","description":"A collection of handy Bash One-Liners and terminal tricks for data processing and Linux system maintenance.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link rel="stylesheet" href="/Bash-Oneliner/assets/css/style.css?v=30e7fd0280141225b0a558090fe63d803ea464b5">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Bash-Oneliner</h1>
      <h2 class="project-tagline">A collection of handy Bash One-Liners and terminal tricks for data processing and Linux system maintenance.</h2>
      
        <a href="https://github.com/onceupon/Bash-Oneliner" class="btn">View on GitHub</a>
      
      
    </section>

    <section class="main-content">
      <h1 id="bash-oneliner">Bash-Oneliner</h1>
<p>I am glad that you are here! I was working on bioinformatics a few years ago and was amazed by those single-word bash commands which are much faster than my dull scripts, time saved through learning command-line shortcuts and scripting. Recent years I am working on cloud computing and I keep recording those useful commands here. Not all of them is oneliner, but i put effort on making them brief and swift. I am mainly using Ubuntu, RedHat and Linux Mint, Mac and CentOS, sorry if the commands don’t work on your system.</p>

<p>This blog will focus on simple bash commands for parsing data and Linux system maintenance that i acquired from work and LPIC exam. I apologize that there are no detailed citation for all the commands, but they are probably from dear Google and Stackoverflow.</p>

<p>English and bash are not my first language, please correct me anytime, thank you.
If you know other cool commands, please teach me!</p>

<p>Here’s a more stylish version of <a href="https://onceupon.github.io/Bash-Oneliner/">Bash-Oneliner</a>~</p>

<h2 id="handy-bash-one-liners">Handy Bash one-liners</h2>

<ul>
  <li><a href="#terminal-tricks">Terminal Tricks</a></li>
  <li><a href="#variable">Variable</a></li>
  <li><a href="#grep">Grep</a></li>
  <li><a href="#sed">Sed</a></li>
  <li><a href="#awk">Awk</a></li>
  <li><a href="#xargs">Xargs</a></li>
  <li><a href="#find">Find</a></li>
  <li><a href="#condition-and-loop">Condition and Loop</a></li>
  <li><a href="#math">Math</a></li>
  <li><a href="#time">Time</a></li>
  <li><a href="#download">Download</a></li>
  <li><a href="#random">Random</a></li>
  <li><a href="#xwindow">Xwindow</a></li>
  <li><a href="#system">System</a></li>
  <li><a href="#hardware">Hardware</a></li>
  <li><a href="#networking">Networking</a></li>
  <li><a href="#data-wrangling">Data Wrangling</a></li>
  <li><a href="#others">Others</a></li>
</ul>

<h2 id="terminal-tricks">Terminal Tricks</h2>

<h5 id="using-ctrl-keys">Using Ctrl keys</h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Ctrl + n : same as Down arrow.
Ctrl + p : same as Up arrow.
Ctrl + r : begins a backward search through command history.(keep pressing Ctrl + r to move backward)
Ctrl + s : to stop output to terminal.
Ctrl + q : to resume output to terminal after Ctrl + s.
Ctrl + a : move to the beginning of line.
Ctrl + e : move to the end of line.
Ctrl + d : if you've type something, Ctrl + d deletes the character under the cursor, else, it escapes the current shell.
Ctrl + k : delete all text from the cursor to the end of line.
Ctrl + x + backspace : delete all text from the beginning of line to the cursor.
Ctrl + t : transpose the character before the cursor with the one under the cursor, press Esc + t to transposes the two words before the cursor.
Ctrl + w : cut the word before the cursor; then Ctrl + y paste it
Ctrl + u : cut the line before the cursor; then Ctrl + y paste it
Ctrl + _ : undo typing.
Ctrl + l : equivalent to clear.
Ctrl + x + Ctrl + e : launch editor defined by $EDITOR to input your command. Useful for multi-line commands.
</code></pre></div></div>
<h5 id="change-case">Change case</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Esc + u
<span class="c"># converts text from cursor to the end of the word to uppercase.</span>
Esc + l
<span class="c"># converts text from cursor to the end of the word to lowercase.</span>
Esc + c
<span class="c"># converts letter under the cursor to uppercase.</span>
</code></pre></div></div>
<h5 id="run-history-number-eg-53">Run history number (e.g. 53)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">!</span>53
</code></pre></div></div>

<h5 id="run-last-command">Run last command</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">!!</span>
<span class="c"># run the previous command using sudo</span>
<span class="nb">sudo</span> <span class="o">!!</span>
<span class="c"># of course you need to enter your password</span>
</code></pre></div></div>

<h5 id="run-last-command-and-change-some-parameter-using-caret-substitution-eg-last-command-echo-aaa---rerun-as-echo-bbb">Run last command and change some parameter using caret substitution (e.g. last command: echo ‘aaa’ -&gt; rerun as: echo ‘bbb’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#last command: echo 'aaa'</span>
^aaa^bbb

<span class="c">#echo 'bbb'</span>
<span class="c">#bbb</span>

<span class="c">#Notice that only the first aaa will be replaced, if you want to replace all 'aaa', use ':&amp;' to repeat it:</span>
^aaa^bbb^:&amp;
<span class="c">#or</span>
<span class="o">!!</span>:gs/aaa/bbb/

</code></pre></div></div>

<h5 id="run-past-command-that-began-with-eg-cat-filename">Run past command that began with (e.g. cat filename)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">!</span><span class="nb">cat</span>
<span class="c"># or</span>
<span class="o">!</span>c
<span class="c"># run cat filename again</span>
</code></pre></div></div>

<h5 id="bash-globbing">Bash globbing</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># '*' serves as a "wild card" for filename expansion.</span>
/b?n/?at      <span class="c">#/bin/cat</span>

<span class="c"># '?' serves as a single-character "wild card" for filename expansion.</span>
/etc/pa<span class="k">*</span>wd    <span class="c">#/etc/passwd</span>

<span class="c"># ‘[]’ serves to match the character from a range.</span>
<span class="nb">ls</span> <span class="nt">-l</span> <span class="o">[</span>a-z]<span class="k">*</span>   <span class="c">#list all files with alphabet in its filename.</span>

<span class="c"># ‘{}’ can be used to match filenames with more than one patterns</span>
<span class="nb">ls</span> <span class="o">{</span><span class="k">*</span>.sh,<span class="k">*</span>.py<span class="o">}</span>   <span class="c">#list all .sh and .py files</span>
</code></pre></div></div>

<h5 id="some-handy-environment-variables">Some handy environment variables</h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$0   :name of shell or shell script.
$1, $2, $3, ... :positional parameters.
$#   :number of positional parameters.
$?   :most recent foreground pipeline exit status.
$-   :current options set for the shell.
$$   :pid of the current shell (not subshell).
$!   :is the PID of the most recent background command.

$DESKTOP_SESSION     current display manager
$EDITOR   preferred text editor.
$LANG   current language.
$PATH   list of directories to search for executable files (i.e. ready-to-run programs)
$PWD    current directory
$SHELL  current shell
$USER   current username
$HOSTNAME   current hostname
</code></pre></div></div>

<h2 id="grep">Grep</h2>
<p>[<a href="#handy-bash-one-liners">back to top</a>]</p>

<h5 id="type-of-grep">Type of grep</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="o">=</span> <span class="nb">grep</span> <span class="nt">-G</span> <span class="c"># Basic Regular Expression (BRE)</span>
fgrep <span class="o">=</span> <span class="nb">grep</span> <span class="nt">-F</span> <span class="c"># fixed text, ignoring meta-charachetrs</span>
egrep <span class="o">=</span> <span class="nb">grep</span> <span class="nt">-E</span> <span class="c"># Extended Regular Expression (ERE)</span>
pgrep <span class="o">=</span> <span class="nb">grep</span> <span class="nt">-P</span> <span class="c"># Perl Compatible Regular Expressions (PCRE)</span>
rgrep <span class="o">=</span> <span class="nb">grep</span> <span class="nt">-r</span> <span class="c"># recursive</span>
</code></pre></div></div>

<h5 id="grep-and-count-number-of-empty-lines">Grep and count number of empty lines</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-c</span> <span class="s2">"^$"</span>
</code></pre></div></div>

<h5 id="grep-and-return-only-integer">Grep and return only integer</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-o</span> <span class="s1">'[0-9]*'</span>
<span class="c">#or</span>
<span class="nb">grep</span> <span class="nt">-oP</span> <span class="s1">'\d'</span>
</code></pre></div></div>
<h5 id="grep-integer-with-certain-number-of-digits-eg-3">Grep integer with certain number of digits (e.g. 3)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> ‘[0-9]<span class="se">\{</span>3<span class="se">\}</span>’
<span class="c"># or</span>
<span class="nb">grep</span> <span class="nt">-E</span> ‘[0-9]<span class="o">{</span>3<span class="o">}</span>’
<span class="c"># or</span>
<span class="nb">grep</span> <span class="nt">-P</span> ‘<span class="se">\d</span><span class="o">{</span>3<span class="o">}</span>’
</code></pre></div></div>

<h5 id="grep-only-ip-address">Grep only IP address</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-Eo</span> <span class="s1">'[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'</span>
<span class="c"># or</span>
<span class="nb">grep</span> <span class="nt">-Po</span> <span class="s1">'\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}'</span>
</code></pre></div></div>

<h5 id="grep-whole-word-eg-target">Grep whole word (e.g. ‘target’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-w</span> <span class="s1">'target'</span>

<span class="c">#or using RE</span>
<span class="nb">grep</span> <span class="s1">'\btarget\b'</span>
</code></pre></div></div>
<h5 id="grep-returning-lines-before-and-after-match-eg-bbo">Grep returning lines before and after match (e.g. ‘bbo’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># return also 3 lines after match</span>
<span class="nb">grep</span> <span class="nt">-A</span> 3 <span class="s1">'bbo'</span>

<span class="c"># return also 3 lines before match</span>
<span class="nb">grep</span> <span class="nt">-B</span> 3 <span class="s1">'bbo'</span>

<span class="c"># return also 3 lines before and after match</span>
<span class="nb">grep</span> <span class="nt">-C</span> 3 <span class="s1">'bbo'</span>
</code></pre></div></div>

<h5 id="grep-string-starting-with-eg-s">Grep string starting with (e.g. ‘S’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-o</span> <span class="s1">'S.*'</span>
</code></pre></div></div>

<h5 id="extract-text-between-words-eg-w1w2">Extract text between words (e.g. w1,w2)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-o</span> <span class="nt">-P</span> <span class="s1">'(?&lt;=w1).*(?=w2)'</span>
</code></pre></div></div>

<h5 id="grep-lines-without-word-eg-bbo">Grep lines without word (e.g. ‘bbo’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-v</span> bbo filename
</code></pre></div></div>

<h5 id="grep-lines-not-begin-with-string-eg-">Grep lines not begin with string (e.g. #)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-v</span> <span class="s1">'^#'</span> file.txt
</code></pre></div></div>

<h5 id="grep-variables-with-space-within-it-eg-myvarsome-strings">Grep variables with space within it (e.g. myvar=”some strings”)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="s2">"</span><span class="nv">$myvar</span><span class="s2">"</span> filename
<span class="c">#remember to quote the variable!</span>
</code></pre></div></div>

<h5 id="grep-only-onefirst-match-eg-bbo">Grep only one/first match (e.g. ‘bbo’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-m</span> 1 bbo filename
</code></pre></div></div>

<h5 id="grep-and-return-number-of-matching-lineeg-bbo">Grep and return number of matching line(e.g. ‘bbo’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-c</span> bbo filename
</code></pre></div></div>

<h5 id="count-occurrence-eg-three-times-a-line-count-three-times">Count occurrence (e.g. three times a line count three times)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-o</span> bbo filename |wc <span class="nt">-l</span>
</code></pre></div></div>

<h5 id="case-insensitive-grep-eg-bbobbobbo">Case insensitive grep (e.g. ‘bbo’/’BBO’/’Bbo’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-i</span> <span class="s2">"bbo"</span> filename
</code></pre></div></div>

<h5 id="color-the-match-eg-bbo">COLOR the match (e.g. ‘bbo’)!</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">--color</span> bbo filename
</code></pre></div></div>

<h5 id="grep-search-all-files-in-a-directoryeg-bbo">Grep search all files in a directory(e.g. ‘bbo’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-R</span> bbo /path/to/directory
<span class="c"># or</span>
<span class="nb">grep</span> <span class="nt">-r</span> bbo /path/to/directory
</code></pre></div></div>

<h5 id="search-all-files-in-directory-do-not-ouput-the-filenames-eg-bbo">Search all files in directory, do not ouput the filenames (e.g. ‘bbo’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-rh</span> bbo /path/to/directory
</code></pre></div></div>

<h5 id="search-all-files-in-directory-output-only-the-filenames-with-matcheseg-bbo">Search all files in directory, output ONLY the filenames with matches(e.g. ‘bbo’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-rl</span> bbo /path/to/directory
</code></pre></div></div>

<h5 id="grep-or-eg-a-or-b-or-c-or-d">Grep OR (e.g. A or B or C or D)</h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>grep 'A\|B\|C\|D'
</code></pre></div></div>

<h5 id="grep-and-eg-a-and-b">Grep AND (e.g. A and B)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="s1">'A.*B'</span>
</code></pre></div></div>

<h5 id="regex-any-singer-character-eg-acb-or-aeb">Regex any singer character (e.g. ACB or AEB)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="s1">'A.B'</span>
</code></pre></div></div>

<h5 id="regex-with-or-without-a-certain-character-eg-color-or-colour">Regex with or without a certain character (e.g. color or colour)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> ‘colou?r’
</code></pre></div></div>

<h5 id="grep-all-content-of-a-filea-from-fileb">Grep all content of a fileA from fileB</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-f</span> fileA fileB
</code></pre></div></div>

<h5 id="grep-a-tab">Grep a tab</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="s1">$'</span><span class="se">\t</span><span class="s1">'</span>
</code></pre></div></div>

<h5 id="grep-variable-from-variable">Grep variable from variable</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$echo</span> <span class="s2">"</span><span class="nv">$long_str</span><span class="s2">"</span>|grep <span class="nt">-q</span> <span class="s2">"</span><span class="nv">$short_str</span><span class="s2">"</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> <span class="nt">-eq</span> 0 <span class="o">]</span><span class="p">;</span> <span class="k">then </span><span class="nb">echo</span> <span class="s1">'found'</span><span class="p">;</span> <span class="k">fi</span>
<span class="c">#grep -q will output 0 if match found</span>
<span class="c">#remember to add space between []!</span>
</code></pre></div></div>

<h5 id="grep-strings-between-a-bracket">Grep strings between a bracket()</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-oP</span> <span class="s1">'\(\K[^\)]+'</span>
</code></pre></div></div>

<h5 id="grep-number-of-characters-with-known-strings-in-betweeneg-aael000001-ra">Grep number of characters with known strings in between(e.g. AAEL000001-RA)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-o</span> <span class="nt">-w</span> <span class="s2">"</span><span class="se">\w\{</span><span class="s2">10</span><span class="se">\}\-</span><span class="s2">R</span><span class="se">\w\{</span><span class="s2">1</span><span class="se">\}</span><span class="s2">"</span>
<span class="c"># \w word character [0-9a-zA-Z_] \W not word character</span>
</code></pre></div></div>

<h5 id="skip-directory-eg-bbo">Skip directory (e.g. ‘bbo’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-d</span> skip <span class="s1">'bbo'</span> /path/to/files/<span class="k">*</span>
</code></pre></div></div>

<h2 id="sed">Sed</h2>
<p>[<a href="#handy-bash-one-liners">back to top</a>]</p>
<h5 id="remove-the-1st-line">Remove the 1st line</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed </span>1d filename
</code></pre></div></div>

<h5 id="remove-the-first-100-lines-remove-line-1-100">Remove the first 100 lines (remove line 1-100)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed </span>1,100d filename
</code></pre></div></div>

<h5 id="remove-lines-with-string-eg-bbo">Remove lines with string (e.g. ‘bbo’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="s2">"/bbo/d"</span> filename
- <span class="k">case</span> insensitive:
<span class="nb">sed</span> <span class="s2">"/bbo/Id"</span> filename
</code></pre></div></div>
<h5 id="remove-lines-whose-nth-character-not-equal-to-a-value-eg-5th-character-not-equal-to-2">Remove lines whose nth character not equal to a value (e.g. 5th character not equal to 2)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-E</span> <span class="s1">'/^.{5}[^2]/d'</span>
<span class="c">#aaaa2aaa (you can stay)</span>
<span class="c">#aaaa1aaa (delete!)</span>
</code></pre></div></div>

<h5 id="edit-infile-edit-and-save-to-file-eg-deleting-the-lines-with-bbo-and-save-to-file">Edit infile (edit and save to file), (e.g. deleting the lines with ‘bbo’ and save to file)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"/bbo/d"</span> filename
</code></pre></div></div>

<h5 id="when-using-variable-eg-i-use-double-quotes--">When using variable (e.g. $i), use double quotes “ “</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># e.g. add &gt;$i to the first line (to make a bioinformatics FASTA file)</span>
<span class="nb">sed</span> <span class="s2">"1i &gt;</span><span class="nv">$i</span><span class="s2">"</span>
<span class="c"># notice the double quotes! in other examples, you can use a single quote, but here, no way!</span>
<span class="c"># '1i' means insert to first line</span>
</code></pre></div></div>

<h5 id="using-environment-variable-and-end-of-line-pattern-at-the-same-time">Using environment variable and end-of-line pattern at the same time.</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Use backslash for end-of-line $ pattern, and double quotes for expressing the variable</span>
<span class="nb">sed</span> <span class="nt">-e</span> <span class="s2">"</span><span class="se">\$</span><span class="s2">s/</span><span class="se">\$</span><span class="s2">/</span><span class="se">\n</span><span class="s2">+--</span><span class="nv">$3</span><span class="s2">-----+/"</span>
</code></pre></div></div>

<h5 id="deleteremove-empty-lines">Delete/remove empty lines</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="s1">'/^\s*$/d'</span>

<span class="c"># or</span>

<span class="nb">sed</span> <span class="s1">'/^$/d'</span>
</code></pre></div></div>
<h5 id="deleteremove-last-line">Delete/remove last line</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="s1">'$d'</span>
</code></pre></div></div>

<h5 id="deleteremove-last-character-from-end-of-file">Delete/remove last character from end of file</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'$ s/.$//'</span> filename
</code></pre></div></div>

<h5 id="add-string-to-beginning-of-file-eg-">Add string to beginning of file (e.g. “[”)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'1s/^/[/'</span> file
</code></pre></div></div>

<h5 id="add-string-at-certain-line-number-eg-add-something-to-line-1-and-line-3">Add string at certain line number (e.g. add ‘something’ to line 1 and line 3)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'1isomething -e '</span>3isomething<span class="s1">'
</span></code></pre></div></div>

<h5 id="add-string-to-end-of-file-eg-">Add string to end of file (e.g. “]”)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="s1">'$s/$/]/'</span> filename
</code></pre></div></div>
<h5 id="add-newline-to-the-end">Add newline to the end</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="s1">'$a\'</span>
</code></pre></div></div>

<h5 id="add-string-to-beginning-of-every-line-eg-bbo">Add string to beginning of every line (e.g. ‘bbo’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s/^/bbo/'</span> file
</code></pre></div></div>

<h5 id="add-string-to-end-of-each-line-eg-">Add string to end of each line (e.g. “}”)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s/$/\}\]/'</span> filename
</code></pre></div></div>

<h5 id="add-n-every-nth-character-eg-every-4th-character">Add \n every nth character (e.g. every 4th character)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="s1">'s/.\{4\}/&amp;\n/g'</span>
</code></pre></div></div>

<h5 id="concatenatecombinejoin-files-with-a-seperator-and-next-line-eg-separate-by-">Concatenate/combine/join files with a seperator and next line (e.g separate by “,”)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-s</span> <span class="s1">'$a,'</span> <span class="k">*</span>.json <span class="o">&gt;</span> all.json
</code></pre></div></div>

<h5 id="substitution-eg-replace-a-by-b">Substitution (e.g. replace A by B)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="s1">'s/A/B/g'</span> filename
</code></pre></div></div>

<h5 id="substitution-with-wildcard-eg-replace-a-line-start-with-aaa-by-aaamynewpath">Substitution with wildcard (e.g. replace a line start with aaa= by aaa=/my/new/path)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="s2">"s/aaa=.*/aaa=</span><span class="se">\/</span><span class="s2">my</span><span class="se">\/</span><span class="s2">new</span><span class="se">\/</span><span class="s2">path/g"</span>
</code></pre></div></div>

<h5 id="select-lines-start-with-string-eg-bbo">Select lines start with string (e.g. ‘bbo’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-n</span> <span class="s1">'/^@S/p'</span>
</code></pre></div></div>
<h5 id="delete-lines-with-string-eg-bbo">Delete lines with string (e.g. ‘bbo’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="s1">'/bbo/d'</span> filename
</code></pre></div></div>

<h5 id="printgettrim-a-range-of-line-eg-line-500-5000">Print/get/trim a range of line (e.g. line 500-5000)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-n</span> 500,5000p filename
</code></pre></div></div>

<h5 id="print-every-nth-lines">Print every nth lines</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-n</span> <span class="s1">'0~3p'</span> filename

<span class="c"># catch 0: start; 3: step</span>
</code></pre></div></div>

<h5 id="print-every-odd--lines">Print every odd # lines</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-n</span> <span class="s1">'1~2p'</span>
</code></pre></div></div>
<h5 id="print-every-third-line-including-the-first-line">Print every third line including the first line</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-n</span> <span class="s1">'1p;0~3p'</span>
</code></pre></div></div>
<h5 id="remove-leading-whitespace-and-tabs">Remove leading whitespace and tabs</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s/^[ \t]*//'</span>
<span class="c"># Notice a whitespace before '\t'!!</span>
</code></pre></div></div>

<h5 id="remove-only-leading-whitespace">Remove only leading whitespace</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="s1">'s/ *//'</span>

<span class="c"># notice a whitespace before '*'!!</span>
</code></pre></div></div>

<h5 id="remove-ending-commas">Remove ending commas</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="s1">'s/,$//g'</span>
</code></pre></div></div>

<h5 id="add-a-column-to-the-end">Add a column to the end</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="s2">"s/</span><span class="nv">$/</span><span class="se">\t</span><span class="nv">$i</span><span class="s2">/"</span>
<span class="c"># $i is the valuable you want to add</span>

<span class="c"># To add the filename to every last column of the file</span>
<span class="k">for </span>i <span class="k">in</span> <span class="si">$(</span><span class="nb">ls</span><span class="si">)</span><span class="p">;</span><span class="k">do </span><span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s/</span><span class="nv">$/</span><span class="se">\t</span><span class="nv">$i</span><span class="s2">/"</span> <span class="nv">$i</span><span class="p">;</span><span class="k">done</span>
</code></pre></div></div>

<h5 id="add-extension-of-filename-to-last-column">Add extension of filename to last column</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for </span>i <span class="k">in </span>T000086_1.02.n T000086_1.02.p<span class="p">;</span><span class="k">do </span><span class="nb">sed</span> <span class="s2">"s/</span><span class="nv">$/</span><span class="se">\t</span><span class="k">${</span><span class="nv">i</span><span class="p">/*./</span><span class="k">}</span><span class="s2">/"</span> <span class="nv">$i</span><span class="p">;</span><span class="k">done</span> <span class="o">&gt;</span>T000086_1.02.np
</code></pre></div></div>

<h5 id="remove-newline-nextline">Remove newline\ nextline</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="s1">':a;N;$!ba;s/\n//g'</span>
</code></pre></div></div>

<h5 id="print-a-particular-line-eg-123th-line">Print a particular line (e.g. 123th line)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-n</span> <span class="nt">-e</span> <span class="s1">'123p'</span>
</code></pre></div></div>

<h5 id="print-a-number-of-lines-eg-line-10th-to-line-33-rd">Print a number of lines (e.g. line 10th to line 33 rd)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-n</span> <span class="s1">'10,33p'</span> &lt;filename
</code></pre></div></div>

<h5 id="change-delimiter">Change delimiter</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="s1">'s=/=\\/=g'</span>
</code></pre></div></div>

<h5 id="replace-with-wildcard-eg-a-1-e-or-a-2-e-or-a-3-e">Replace with wildcard (e.g A-1-e or A-2-e or A-3-e….)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="s1">'s/A-.*-e//g'</span> filename
</code></pre></div></div>

<h5 id="remove-last-character-of-file">Remove last character of file</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="s1">'$ s/.$//'</span>
</code></pre></div></div>

<h5 id="insert-character-at-specified-position-of-file-eg-aaaaaa--aaaaaa">Insert character at specified position of file (e.g. AAAAAA –&gt; AAA#AAA)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-r</span> <span class="nt">-e</span> <span class="s1">'s/^.{3}/&amp;#/'</span> file
</code></pre></div></div>

<h2 id="awk">Awk</h2>
<p>[<a href="#handy-bash-one-liners">back to top</a>]</p>

<h5 id="set-tab-as-field-separator">Set tab as field separator</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="nt">-F</span> <span class="s1">$'</span><span class="se">\t</span><span class="s1">'</span>
</code></pre></div></div>

<h5 id="output-as-tab-separated-also-as-field-separator">Output as tab separated (also as field separator)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="nt">-v</span> <span class="nv">OFS</span><span class="o">=</span><span class="s1">'\t'</span>
</code></pre></div></div>

<h5 id="pass-variable">Pass variable</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">a</span><span class="o">=</span>bbo<span class="p">;</span><span class="nv">b</span><span class="o">=</span>obb<span class="p">;</span>
<span class="nb">awk</span> <span class="nt">-v</span> <span class="nv">a</span><span class="o">=</span><span class="s2">"</span><span class="nv">$a</span><span class="s2">"</span> <span class="nt">-v</span> <span class="nv">b</span><span class="o">=</span><span class="s2">"</span><span class="nv">$b</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">==a &amp;&amp; </span><span class="nv">$10</span><span class="s2">=b"</span> filename
</code></pre></div></div>

<h5 id="print-line-number-and-number-of-characters-on-each-line">Print line number and number of characters on each line</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="s1">'{print NR,length($0);}'</span> filename
</code></pre></div></div>

<h5 id="find-number-of-columns">Find number of columns</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="s1">'{print NF}'</span>
</code></pre></div></div>

<h5 id="reverse-column-order">Reverse column order</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="s1">'{print $2, $1}'</span>
</code></pre></div></div>

<h5 id="check-if-there-is-a-comma-in-a-column-eg-column-1">Check if there is a comma in a column (e.g. column $1)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="s1">'$1~/,/ {print}'</span>
</code></pre></div></div>

<h5 id="split-and-do-for-loop">Split and do for loop</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="s1">'{split($2, a,",");for (i in a) print $1"\t"a[i]}'</span> filename
</code></pre></div></div>

<h5 id="print-all-lines-before-nth-occurrence-of-a-string-eg-stop-print-lines-when-bbo-appears-7-times">Print all lines before nth occurrence of a string (e.g stop print lines when ‘bbo’ appears 7 times)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="nt">-v</span> <span class="nv">N</span><span class="o">=</span>7 <span class="s1">'{print}/bbo/&amp;&amp; --N&lt;=0 {exit}'</span>
</code></pre></div></div>

<h5 id="print-filename-and-last-line-of-all-files-in-directory">Print filename and last line of all files in directory</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span>|xargs <span class="nt">-n1</span> <span class="nt">-I</span> file <span class="nb">awk</span> <span class="s1">'{s=$0};END{print FILENAME,s}'</span> file
</code></pre></div></div>

<h5 id="add-string-to-the-beginning-of-a-column-eg-add-chr-to-column-3">Add string to the beginning of a column (e.g add “chr” to column $3)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="s1">'BEGIN{OFS="\t"}$3="chr"$3'</span>
</code></pre></div></div>

<h5 id="remove-lines-with-string-eg-bbo-1">Remove lines with string (e.g. ‘bbo’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="s1">'!/bbo/'</span> file
</code></pre></div></div>

<h5 id="remove-last-column">Remove last column</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="s1">'NF{NF-=1};1'</span> file
</code></pre></div></div>

<h5 id="usage-and-meaning-of-nr-and-fnr">Usage and meaning of NR and FNR</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># For example there are two files:</span>
<span class="c"># fileA:</span>
<span class="c"># a</span>
<span class="c"># b</span>
<span class="c"># c</span>
<span class="c"># fileB:</span>
<span class="c"># d</span>
<span class="c"># e</span>
<span class="nb">awk</span> <span class="s1">'print FILENAME, NR,FNR,$0}'</span> fileA fileB
<span class="c"># fileA    1    1    a</span>
<span class="c"># fileA    2    2    b</span>
<span class="c"># fileA    3    3    c</span>
<span class="c"># fileB    4    1    d</span>
<span class="c"># fileB    5    2    e</span>
</code></pre></div></div>

<h5 id="and-gate">AND gate</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># For example there are two files:</span>
<span class="c"># fileA:</span>
<span class="c"># 1    0</span>
<span class="c"># 2    1</span>
<span class="c"># 3    1</span>
<span class="c"># 4    0</span>
<span class="c"># fileB:</span>
<span class="c"># 1    0</span>
<span class="c"># 2    1</span>
<span class="c"># 3    0</span>
<span class="c"># 4    1</span>

<span class="nb">awk</span> <span class="nt">-v</span> <span class="nv">OFS</span><span class="o">=</span><span class="s1">'\t'</span> <span class="s1">'NR=FNR{a[$1]=$2;next} NF {print $1,((a[$1]=$2)? $2:"0")}'</span> fileA fileB
<span class="c"># 1    0</span>
<span class="c"># 2    1</span>
<span class="c"># 3    0</span>
<span class="c"># 4    0</span>
</code></pre></div></div>

<h5 id="round-all-numbers-of-file-eg-2-significant-figure">Round all numbers of file (e.g. 2 significant figure)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="s1">'{while (match($0, /[0-9]+\[0-9]+/)){
    \printf "%s%.2f", substr($0,0,RSTART-1),substr($0,RSTART,RLENGTH)
    \$0=substr($0, RSTART+RLENGTH)
    \}
    \print
    \}'</span>
</code></pre></div></div>

<h5 id="give-numberindex-to-every-row">Give number/index to every row</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="s1">'{printf("%s\t%s\n",NR,$0)}'</span>
</code></pre></div></div>

<h5 id="break-combine-column-data-into-rows">Break combine column data into rows</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># For example, seperate the following content:</span>
<span class="c"># David    cat,dog</span>
<span class="c"># into</span>
<span class="c"># David    cat</span>
<span class="c"># David    dog</span>

<span class="nb">awk</span> <span class="s1">'{split($2,a,",");for(i in a)print $1"\t"a[i]}'</span> file

<span class="c"># Detail here:　http://stackoverflow.com/questions/33408762/bash-turning-single-comma-separated-column-into-multi-line-string</span>
</code></pre></div></div>

<h5 id="average-a-file-each-line-in-file-contains-only-one-number">Average a file (each line in file contains only one number)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="s1">'{s+=$1}END{print s/NR}'</span>
</code></pre></div></div>

<h5 id="print-field-start-with-string-eg-linux">Print field start with string (e.g Linux)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="s1">'$1 ~ /^Linux/'</span>
</code></pre></div></div>

<h5 id="sort-a-row-eg-1-40--35--12--23---1-12----23--35--40">Sort a row (e.g. 1 40  35  12  23  –&gt; 1 12    23  35  40)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="s1">' {split( $0, a, "\t" ); asort( a ); for( i = 1; i &lt;= length(a); i++ ) printf( "%s\t", a[i] ); printf( "\n" ); }'</span>
</code></pre></div></div>

<h5 id="subtract-previous-row-values-add-column6-which-equal-to-column4-minus-last-column5">Subtract previous row values (add column6 which equal to column4 minus last column5)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="s1">'{$6 = $4 - prev5; prev5 = $5; print;}'</span>
</code></pre></div></div>

<h2 id="xargs">Xargs</h2>
<p>[<a href="#handy-bash-one-liners">back to top</a>]</p>

<h5 id="set-tab-as-delimiter-defaultspace">Set tab as delimiter (default:space)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xargs <span class="nt">-d</span><span class="se">\t</span>
</code></pre></div></div>

<h5 id="display-3-items-per-line">Display 3 items per line</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo </span>1 2 3 4 5 6| xargs <span class="nt">-n</span> 3
<span class="c"># 1 2 3</span>
<span class="c"># 4 5 6</span>

</code></pre></div></div>
<h5 id="prompt-before-execution">Prompt before execution</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo </span>a b c |xargs <span class="nt">-p</span> <span class="nt">-n</span> 3
</code></pre></div></div>

<h5 id="print-command-along-with-output">Print command along with output</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xargs <span class="nt">-t</span> abcd
<span class="c"># bin/echo abcd</span>
<span class="c"># abcd</span>

</code></pre></div></div>
<h5 id="with-find-and-rm">With find and rm</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find <span class="nb">.</span> <span class="nt">-name</span> <span class="s2">"*.html"</span>|xargs <span class="nb">rm</span>

<span class="c"># when using a backtick</span>
<span class="nb">rm</span> <span class="sb">`</span>find <span class="nb">.</span> <span class="nt">-name</span> <span class="s2">"*.html"</span><span class="sb">`</span>
</code></pre></div></div>

<h5 id="delete-files-with-whitespace-in-filename-eg-hello-2001">Delete files with whitespace in filename (e.g. “hello 2001”)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find <span class="nb">.</span> <span class="nt">-name</span> <span class="s2">"*.c"</span> <span class="nt">-print0</span>|xargs <span class="nt">-0</span> <span class="nb">rm</span> <span class="nt">-rf</span>
</code></pre></div></div>

<h5 id="show-limits-on-command-line-length">Show limits on command-line length</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xargs <span class="nt">--show-limits</span>
<span class="c"># Output from my Ubuntu:</span>
<span class="c"># Your environment variables take up 3653 bytes</span>
<span class="c"># POSIX upper limit on argument length (this system): 2091451</span>
<span class="c"># POSIX smallest allowable upper limit on argument length (all systems): 4096</span>
<span class="c"># Maximum length of command we could actually use: 2087798</span>
<span class="c"># Size of command buffer we are actually using: 131072</span>
<span class="c"># Maximum parallelism (--max-procs must be no greater): 2147483647</span>
</code></pre></div></div>

<h5 id="move-files-to-folder">Move files to folder</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find <span class="nb">.</span> <span class="nt">-name</span> <span class="s2">"*.bak"</span> <span class="nt">-print</span> 0|xargs <span class="nt">-0</span> <span class="nt">-I</span> <span class="o">{}</span> <span class="nb">mv</span> <span class="o">{}</span> ~/old

<span class="c"># or</span>
find <span class="nb">.</span> <span class="nt">-name</span> <span class="s2">"*.bak"</span> <span class="nt">-print</span> 0|xargs <span class="nt">-0</span> <span class="nt">-I</span> file <span class="nb">mv </span>file ~/old
</code></pre></div></div>

<h5 id="move-first-100th-files-to-a-directory-eg-d1">Move first 100th files to a directory (e.g. d1)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span> |head <span class="nt">-100</span>|xargs <span class="nt">-I</span> <span class="o">{}</span> <span class="nb">mv</span> <span class="o">{}</span> d1
</code></pre></div></div>

<h5 id="parallel">Parallel</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">time echo</span> <span class="o">{</span>1..5<span class="o">}</span> |xargs <span class="nt">-n</span> 1 <span class="nt">-P</span> 5 <span class="nb">sleep</span>

<span class="c"># a lot faster than:</span>
<span class="nb">time echo</span> <span class="o">{</span>1..5<span class="o">}</span> |xargs <span class="nt">-n1</span> <span class="nb">sleep</span>
</code></pre></div></div>

<h5 id="copy-all-files-from-a-to-b">Copy all files from A to B</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find /dir/to/A <span class="nt">-type</span> f <span class="nt">-name</span> <span class="s2">"*.py"</span> <span class="nt">-print</span> 0| xargs <span class="nt">-0</span> <span class="nt">-r</span> <span class="nt">-I</span> file <span class="nb">cp</span> <span class="nt">-v</span> <span class="nt">-p</span> file <span class="nt">--target-directory</span><span class="o">=</span>/path/to/B

<span class="c"># v: verbose|</span>
<span class="c"># p: keep detail (e.g. owner)</span>

</code></pre></div></div>

<h5 id="with-sed">With sed</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span> |xargs <span class="nt">-n1</span> <span class="nt">-I</span> file <span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'/^Pos/d'</span> filename
</code></pre></div></div>

<h5 id="add-the-file-name-to-the-first-line-of-file">Add the file name to the first line of file</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span> |sed <span class="s1">'s/.txt//g'</span>|xargs <span class="nt">-n1</span> <span class="nt">-I</span> file <span class="nb">sed</span> <span class="nt">-i</span> <span class="nt">-e</span> <span class="s1">'1 i\&gt;file\'</span> file.txt
</code></pre></div></div>

<h5 id="count-all-files">Count all files</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span> |xargs <span class="nt">-n1</span> <span class="nb">wc</span> <span class="nt">-l</span>
</code></pre></div></div>

<h5 id="turn-output-into-a-single-line">Turn output into a single line</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span> <span class="nt">-l</span>| xargs
</code></pre></div></div>

<h5 id="count-files-within-directories">Count files within directories</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo </span>mso<span class="o">{</span>1..8<span class="o">}</span>|xargs <span class="nt">-n1</span> bash <span class="nt">-c</span> <span class="s1">'echo -n "$1:"; ls -la "$1"| grep -w 74 |wc -l'</span> <span class="nt">--</span>
<span class="c"># "--" signals the end of options and display further option processing</span>
</code></pre></div></div>

<h5 id="count-lines-in-all-file-also-count-total-lines">Count lines in all file, also count total lines</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span>|xargs <span class="nb">wc</span> <span class="nt">-l</span>
</code></pre></div></div>
<h5 id="xargs-and-grep">Xargs and grep</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>grep_list |xargs <span class="nt">-I</span><span class="o">{}</span> <span class="nb">grep</span> <span class="o">{}</span> filename
</code></pre></div></div>

<h5 id="xargs-and-sed-replace-all-old-ip-address-with-new-ip-address-under-etc-directory">Xargs and sed (replace all old ip address with new ip address under /etc directory)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-rl</span> <span class="s1">'192.168.1.111'</span> /etc | xargs <span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/192.168.1.111/192.168.2.111/g'</span>
</code></pre></div></div>

<h2 id="find">Find</h2>
<p>[<a href="#handy-bash-one-liners">back to top</a>]</p>
<h5 id="list-all-sub-directoryfile-in-the-current-directory">List all sub directory/file in the current directory</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find <span class="nb">.</span>
</code></pre></div></div>

<h5 id="list-all-files-under-the-current-directory">List all files under the current directory</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find <span class="nb">.</span> <span class="nt">-type</span> f
</code></pre></div></div>

<h5 id="list-all-directories-under-the-current-directory">List all directories under the current directory</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find <span class="nb">.</span> <span class="nt">-type</span> d
</code></pre></div></div>

<h5 id="edit-all-files-under-current-directory-eg-replace-www-with-ww">Edit all files under current directory (e.g. replace ‘www’ with ‘ww’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find <span class="nb">.</span> <span class="nt">-name</span> <span class="s1">'*.php'</span> <span class="nt">-exec</span> <span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/www/w/g'</span> <span class="o">{}</span> <span class="se">\;</span>

<span class="c"># if there are no subdirectory</span>
replace <span class="s2">"www"</span> <span class="s2">"w"</span> <span class="nt">--</span> <span class="k">*</span>
<span class="c"># a space before *</span>
</code></pre></div></div>
<h5 id="find-and-output-only-filename-eg-mso">Find and output only filename (e.g. “mso”)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find mso<span class="k">*</span>/ <span class="nt">-name</span> M<span class="k">*</span> <span class="nt">-printf</span> <span class="s2">"%f</span><span class="se">\n</span><span class="s2">"</span>
</code></pre></div></div>

<h5 id="find-and-delete-file-with-size-less-than-eg-74-byte">Find and delete file with size less than (e.g. 74 byte)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find <span class="nb">.</span> <span class="nt">-name</span> <span class="s2">"*.mso"</span> <span class="nt">-size</span> <span class="nt">-74c</span> <span class="nt">-delete</span>

<span class="c"># M for MB, etc</span>
</code></pre></div></div>

<h2 id="condition-and-loop">Condition and loop</h2>
<p>[<a href="#handy-bash-one-liners">back to top</a>]</p>

<h5 id="if-statement">If statement</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># if and else loop for string matching</span>
<span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$c</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"read"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then </span><span class="nv">outputdir</span><span class="o">=</span><span class="s2">"seq"</span><span class="p">;</span> <span class="k">else </span><span class="nv">outputdir</span><span class="o">=</span><span class="s2">"write"</span> <span class="p">;</span> <span class="k">fi</span>

<span class="c"># Test if myfile contains the string 'test':</span>
<span class="k">if </span><span class="nb">grep</span> <span class="nt">-q</span> hello myfile<span class="p">;</span> <span class="k">then</span> …

<span class="c"># Test if mydir is a directory, change to it and do other stuff:</span>
<span class="k">if </span><span class="nb">cd </span>mydir<span class="p">;</span> <span class="k">then
  </span><span class="nb">echo</span> <span class="s1">'some content'</span> <span class="o">&gt;</span>myfile
<span class="k">else
  </span><span class="nb">echo</span> <span class="o">&gt;</span>&amp;2 <span class="s2">"Fatal error. This script requires mydir."</span>
<span class="k">fi</span>

<span class="c"># if variable is null</span>
<span class="k">if</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-s</span> <span class="s2">"myvariable"</span> <span class="o">]</span>
<span class="c">#True of the length if "STRING" is zero.</span>

<span class="c"># Test if file exist</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-e</span> <span class="s1">'filename'</span> <span class="o">]</span>
<span class="k">then
  </span><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"file exists!"</span>
<span class="k">fi</span>

<span class="c"># Test if file exist but also including symbolic links:</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-e</span> myfile <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> <span class="nt">-L</span> myfile <span class="o">]</span>
<span class="k">then
  </span><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"file exists!"</span>
<span class="k">fi</span>

<span class="c"># Test if the value of x is greater or equal than 5</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$x</span><span class="s2">"</span> <span class="nt">-ge</span> 5 <span class="o">]</span><span class="p">;</span> <span class="k">then</span> …

<span class="c"># Test if the value of x is greater or equal than 5, in bash/ksh/zsh:</span>
<span class="k">if</span> <span class="o">((</span>x <span class="o">&gt;=</span> 5<span class="o">))</span><span class="p">;</span> <span class="k">then</span> …

<span class="c"># Use (( )) for arithmetic operation</span>
<span class="k">if</span> <span class="o">((</span><span class="nv">j</span><span class="o">==</span>u+2<span class="o">))</span>

<span class="c"># Use [[ ]] for comparison</span>
<span class="k">if</span> <span class="o">[[</span> <span class="nv">$age</span> <span class="nt">-gt</span> 21 <span class="o">]]</span>
</code></pre></div></div>

<p><a href="http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html">More if commands</a></p>

<h5 id="for-loop">For loop</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for </span>i <span class="k">in</span> <span class="si">$(</span><span class="nb">ls</span><span class="si">)</span><span class="p">;</span> <span class="k">do </span><span class="nb">echo </span>file <span class="nv">$i</span><span class="p">;</span><span class="k">done</span>
<span class="c">#or</span>
<span class="k">for </span>i <span class="k">in</span> <span class="k">*</span><span class="p">;</span> <span class="k">do </span><span class="nb">echo </span>file <span class="nv">$i</span><span class="p">;</span> <span class="k">done</span>

<span class="c"># Press any key to continue each loop</span>
<span class="k">for </span>i <span class="k">in</span> <span class="si">$(</span><span class="nb">cat </span>tpc_stats_0925.log |grep failed|grep <span class="nt">-o</span> <span class="s1">'\query\w\{1,2\}'</span><span class="si">)</span><span class="p">;</span><span class="k">do </span><span class="nb">cat</span> <span class="k">${</span><span class="nv">i</span><span class="k">}</span>.log<span class="p">;</span> <span class="nb">read</span> <span class="nt">-rsp</span> <span class="s1">$'Press any key to continue...</span><span class="se">\n</span><span class="s1">'</span> <span class="nt">-n1</span> key<span class="p">;</span><span class="k">done</span>

<span class="c"># Print a file line by line when a key is pressed,</span>
<span class="nv">oifs</span><span class="o">=</span><span class="s2">"</span><span class="nv">$IFS</span><span class="s2">"</span><span class="p">;</span> <span class="nv">IFS</span><span class="o">=</span><span class="s1">$'</span><span class="se">\n</span><span class="s1">'</span><span class="p">;</span> <span class="k">for </span>line <span class="k">in</span> <span class="si">$(</span><span class="nb">cat </span>myfile<span class="si">)</span><span class="p">;</span> <span class="k">do</span> ...<span class="p">;</span> <span class="k">done
while </span><span class="nb">read</span> <span class="nt">-r</span> line<span class="p">;</span> <span class="k">do</span> ...<span class="p">;</span> <span class="k">done</span> &lt;myfile

<span class="c">#If only one word a line, simply</span>
<span class="k">for </span>line <span class="k">in</span> <span class="si">$(</span><span class="nb">cat </span>myfile<span class="si">)</span><span class="p">;</span> <span class="k">do </span><span class="nb">echo</span> <span class="nv">$line</span><span class="p">;</span> <span class="nb">read</span> <span class="nt">-n1</span><span class="p">;</span> <span class="k">done</span>

<span class="c">#Loop through an array</span>
<span class="k">for </span>i <span class="k">in</span> <span class="s2">"</span><span class="k">${</span><span class="nv">arrayName</span><span class="p">[@]</span><span class="k">}</span><span class="s2">"</span><span class="p">;</span> <span class="k">do </span><span class="nb">echo</span> <span class="nv">$i</span><span class="p">;</span><span class="k">done</span>

</code></pre></div></div>

<h5 id="while-loop">While loop,</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Column subtraction of a file (e.g. a 3 columns file)</span>
<span class="k">while </span><span class="nb">read </span>a b c<span class="p">;</span> <span class="k">do </span><span class="nb">echo</span> <span class="k">$((</span><span class="nv">$c</span><span class="o">-</span><span class="nv">$b</span><span class="k">))</span><span class="p">;</span><span class="k">done</span> &lt; &lt;<span class="o">(</span><span class="nb">head </span>filename<span class="o">)</span>
<span class="c">#there is a space between the two '&lt;'s</span>

<span class="c"># Sum up column subtraction</span>
<span class="nv">i</span><span class="o">=</span>0<span class="p">;</span> <span class="k">while </span><span class="nb">read </span>a b c<span class="p">;</span> <span class="k">do</span> <span class="o">((</span>i+<span class="o">=</span><span class="nv">$c</span>-<span class="nv">$b</span><span class="o">))</span><span class="p">;</span> <span class="nb">echo</span> <span class="nv">$i</span><span class="p">;</span> <span class="k">done</span> &lt; &lt;<span class="o">(</span><span class="nb">head </span>filename<span class="o">)</span>

<span class="c"># Keep checking a running process (e.g. perl) and start another new process (e.g. python) immediately after it. (BETTER use the wait command! Ctrl+F 'wait')</span>
<span class="k">while</span> <span class="o">[[</span> <span class="si">$(</span>pidof perl<span class="si">)</span> <span class="o">]]</span><span class="p">;</span><span class="k">do </span><span class="nb">echo </span>f<span class="p">;</span><span class="nb">sleep </span>10<span class="p">;</span><span class="k">done</span> <span class="o">&amp;&amp;</span> python timetorunpython.py
</code></pre></div></div>

<h5 id="switch-case-in-bash">switch (case in bash)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">read type</span><span class="p">;</span>
<span class="k">case</span> <span class="nv">$type</span> <span class="k">in</span>
  <span class="s1">'0'</span><span class="p">)</span>
    <span class="nb">echo</span> <span class="s1">'how'</span>
    <span class="p">;;</span>
  <span class="s1">'1'</span><span class="p">)</span>
    <span class="nb">echo</span> <span class="s1">'are'</span>
    <span class="p">;;</span>
  <span class="s1">'2'</span><span class="p">)</span>
    <span class="nb">echo</span> <span class="s1">'you'</span>
    <span class="p">;;</span>
<span class="k">esac</span>
</code></pre></div></div>

<h2 id="variable">Variable</h2>
<p>[<a href="#handy-bash-one-liners">back to top</a>]</p>
<h5 id="variable-substitution-within-quotes">Variable substitution within quotes</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># foo=bar</span>
 <span class="nb">echo</span> <span class="s2">"'</span><span class="nv">$foo</span><span class="s2">'"</span>
<span class="c">#'bar'</span>
<span class="c"># double/single quotes around single quotes make the inner single quotes expand variables</span>
</code></pre></div></div>
<h5 id="get-the-length-of-variable">Get the length of variable</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">var</span><span class="o">=</span><span class="s2">"some string"</span>
<span class="nb">echo</span> <span class="k">${#</span><span class="nv">var</span><span class="k">}</span>
<span class="c"># 11</span>
</code></pre></div></div>
<h5 id="get-the-first-character-of-the-variable">Get the first character of the variable</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">var</span><span class="o">=</span>string
<span class="nb">echo</span> <span class="s2">"</span><span class="k">${</span><span class="nv">var</span>:0:1<span class="k">}</span><span class="s2">"</span>
<span class="c">#s</span>

<span class="c"># or</span>
<span class="nb">echo</span> <span class="k">${</span><span class="nv">var</span><span class="p">%%</span><span class="s2">"</span><span class="k">${</span><span class="nv">var</span><span class="p">#?</span><span class="k">}</span><span class="s2">"</span><span class="k">}</span>
</code></pre></div></div>

<h5 id="remove-the-first-or-last-string-from-variable">Remove the first or last string from variable</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">var</span><span class="o">=</span><span class="s2">"some string"</span>
<span class="nb">echo</span> <span class="k">${</span><span class="nv">var</span>:2<span class="k">}</span>
<span class="c">#me string</span>
</code></pre></div></div>

<h5 id="replacement-eg-remove-the-first-leading-0-">Replacement (e.g. remove the first leading 0 )</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">var</span><span class="o">=</span><span class="s2">"0050"</span>
<span class="nb">echo</span> <span class="k">${</span><span class="nv">var</span><span class="p">[@]#0</span><span class="k">}</span>
<span class="c">#050</span>
</code></pre></div></div>

<h5 id="replacement-eg-replace-a-with-">Replacement (e.g. replace ‘a’ with ‘,’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span>var/a/,<span class="o">}</span>
</code></pre></div></div>

<h5 id="replace-all-eg-replace-all-a-with-">Replace all (e.g. replace all ‘a’ with ‘,’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span>var//a/,<span class="o">}</span>
</code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#with grep</span>
 <span class="nb">test</span><span class="o">=</span><span class="s2">"god the father"</span>
 <span class="nb">grep</span> <span class="k">${</span><span class="nv">test</span><span class="p">// /\\\|</span><span class="k">}</span> file.txt
 <span class="c"># turning the space into 'or' (\|) in grep</span>
</code></pre></div></div>

<h5 id="to-change-the-case-of-the-string-stored-in-the-variable-to-lowercase-parameter-expansion">To change the case of the string stored in the variable to lowercase (Parameter Expansion)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">var</span><span class="o">=</span>HelloWorld
<span class="nb">echo</span> <span class="k">${</span><span class="nv">var</span><span class="p">,,</span><span class="k">}</span>
helloworld
</code></pre></div></div>

<h5 id="expand-and-then-execute-variableargument">Expand and then execute variable/argument</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">cmd</span><span class="o">=</span><span class="s2">"bar=foo"</span>
<span class="nb">eval</span> <span class="s2">"</span><span class="nv">$cmd</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"</span><span class="nv">$bar</span><span class="s2">"</span> <span class="c"># foo</span>
</code></pre></div></div>

<h2 id="math">Math</h2>
<p>[<a href="#handy-bash-one-liners">back to top</a>]</p>
<h5 id="arithmetic-expansion-in-bash-operators-------etc">Arithmetic Expansion in Bash (Operators: +, -, *, /, %, etc)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="k">$((</span> <span class="m">10</span> <span class="o">+</span> <span class="m">5</span> <span class="k">))</span>  <span class="c">#15</span>
<span class="nv">x</span><span class="o">=</span>1
<span class="nb">echo</span> <span class="k">$((</span> x++ <span class="k">))</span> <span class="c">#1 , notice that it is still 1, since it's post-incremen</span>
<span class="nb">echo</span> <span class="k">$((</span> x++ <span class="k">))</span> <span class="c">#2</span>
<span class="nb">echo</span> <span class="k">$((</span> <span class="o">++</span>x <span class="k">))</span> <span class="c">#4 , notice that it is not 3 since it's pre-incremen</span>
<span class="nb">echo</span> <span class="k">$((</span> x-- <span class="k">))</span> <span class="c">#4</span>
<span class="nb">echo</span> <span class="k">$((</span> x-- <span class="k">))</span> <span class="c">#3</span>
<span class="nb">echo</span> <span class="k">$((</span> <span class="o">--</span>x <span class="k">))</span> <span class="c">#1</span>
<span class="nv">x</span><span class="o">=</span>2
<span class="nv">y</span><span class="o">=</span>3
<span class="nb">echo</span> <span class="k">$((</span> x <span class="o">**</span> y <span class="k">))</span> <span class="c">#8</span>
</code></pre></div></div>

<h5 id="print-out-the-prime-factors-of-a-number-eg-50">Print out the prime factors of a number (e.g. 50)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">factor </span>50
<span class="c"># 50: 2 5 5</span>
</code></pre></div></div>
<h5 id="sum-up-input-list-eg-seq-10">Sum up input list (e.g. seq 10)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">seq </span>10|paste <span class="nt">-sd</span>+|bc
</code></pre></div></div>

<h5 id="sum-up-a-file-each-line-in-file-contains-only-one-number">Sum up a file (each line in file contains only one number)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="s1">'{s+=$1} END {print s}'</span> filename
</code></pre></div></div>

<h5 id="column-subtraction">Column subtraction</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>file| <span class="nb">awk</span> <span class="nt">-F</span> <span class="s1">'\t'</span> <span class="s1">'BEGIN {SUM=0}{SUM+=$3-$2}END{print SUM}'</span>
</code></pre></div></div>

<h5 id="simple-math-with-expr">Simple math with expr</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">expr </span>10+20 <span class="c">#30</span>
<span class="nb">expr </span>10<span class="se">\*</span>20 <span class="c">#600</span>
<span class="nb">expr </span>30 <span class="se">\&gt;</span> 20 <span class="c">#1 (true)</span>
</code></pre></div></div>

<h5 id="more-math-with-bc">More math with bc</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Number of decimal digit/ significant figure</span>
<span class="nb">echo</span> <span class="s2">"scale=2;2/3"</span> | bc
<span class="c">#.66</span>

<span class="c"># Exponent operator</span>
<span class="nb">echo</span> <span class="s2">"10^2"</span> | bc
<span class="c">#100</span>

<span class="c"># Using variables</span>
<span class="nb">echo</span> <span class="s2">"var=5;--var"</span>| bc
<span class="c">#4</span>
</code></pre></div></div>

<h2 id="time">Time</h2>
<p>[<a href="#handy-bash-one-liners">back to top</a>]</p>

<h5 id="find-out-the-time-require-for-executing-a-command">Find out the time require for executing a command</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">time echo </span>hi
</code></pre></div></div>

<h5 id="wait-for-some-time-eg-10s">Wait for some time (e.g 10s)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sleep </span>10
</code></pre></div></div>

<h5 id="log-out-your-account-after-a-certain-period-of-time-eg-10-seconds">Log out your account after a certain period of time (e.g 10 seconds)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">TMOUT</span><span class="o">=</span>10
<span class="c">#once you set this variable, logout timer start running!</span>
</code></pre></div></div>

<h5 id="set-how-long-you-want-to-run-a-command">Set how long you want to run a command</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#This will run the command 'sleep 10' for only 1 second.</span>
<span class="nb">timeout </span>1 <span class="nb">sleep </span>10
</code></pre></div></div>

<h5 id="set-when-you-want-to-run-a-command-eg-1-min-from-now">Set when you want to run a command (e.g 1 min from now)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>at now + 1min  <span class="c">#time-units can be minutes, hours, days, or weeks</span>
warning: commands will be executed using /bin/sh
at&gt; <span class="nb">echo </span>hihigithub <span class="o">&gt;</span>~/itworks
at&gt; &lt;EOT&gt;   <span class="c"># press Ctrl + D to exit</span>
job 1 at Wed Apr 18 11:16:00 2018
</code></pre></div></div>

<h2 id="download">Download</h2>
<p>[<a href="#handy-bash-one-liners">back to top</a>]</p>

<h5 id="download-the-content-of-this-readmemd-the-one-your-are-viewing-now">Download the content of this README.md (the one your are viewing now)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl https://raw.githubusercontent.com/onceupon/Bash-Oneliner/master/README.md | pandoc <span class="nt">-f</span> markdown <span class="nt">-t</span> man | man <span class="nt">-l</span> -

<span class="c"># or w3m (a text based web browser and pager)</span>
curl https://raw.githubusercontent.com/onceupon/Bash-Oneliner/master/README.md | pandoc | w3m <span class="nt">-T</span> text/html

<span class="c"># or using emacs (in emac text editor)</span>
emacs <span class="nt">--eval</span> <span class="s1">'(org-mode)'</span> <span class="nt">--insert</span> &lt;<span class="o">(</span>curl https://raw.githubusercontent.com/onceupon/Bash-Oneliner/master/README.md | pandoc <span class="nt">-t</span> org<span class="o">)</span>

<span class="c"># or using emacs (on terminal, exit using Ctrl + x then Ctrl + c)</span>
emacs <span class="nt">-nw</span> <span class="nt">--eval</span> <span class="s1">'(org-mode)'</span> <span class="nt">--insert</span> &lt;<span class="o">(</span>curl https://raw.githubusercontent.com/onceupon/Bash-Oneliner/master/README.md | pandoc <span class="nt">-t</span> org<span class="o">)</span>
</code></pre></div></div>

<h5 id="download-all-from-a-page">Download all from a page</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget <span class="nt">-r</span> <span class="nt">-l1</span> <span class="nt">-H</span> <span class="nt">-t1</span> <span class="nt">-nd</span> <span class="nt">-N</span> <span class="nt">-np</span> <span class="nt">-A</span> mp3 <span class="nt">-e</span> <span class="nv">robots</span><span class="o">=</span>off http://example.com

<span class="c"># -r: recursive and download all links on page</span>
<span class="c"># -l1: only one level link</span>
<span class="c"># -H: span host, visit other hosts</span>
<span class="c"># -t1: numbers of retries</span>
<span class="c"># -nd: don't make new directories, download to here</span>
<span class="c"># -N: turn on timestamp</span>
<span class="c"># -nd: no parent</span>
<span class="c"># -A: type (separate by ,)</span>
<span class="c"># -e robots=off: ignore the robots.txt file which stop wget from crashing the site, sorry example.com</span>
</code></pre></div></div>

<h5 id="upload-a-file-to-web-and-download-httpstransfersh">Upload a file to web and download (https://transfer.sh/)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#  Upload a file (e.g. filename.txt):</span>
curl <span class="nt">--upload-file</span> ./filename.txt https://transfer.sh/filename.txt
<span class="c"># the above command will return a URL, e.g: https://transfer.sh/tG8rM/filename.txt</span>

<span class="c"># Next you can download it by:</span>
curl https://transfer.sh/tG8rM/filename.txt <span class="nt">-o</span> filename.txt
</code></pre></div></div>

<h5 id="download-file-if-necessary">Download file if necessary</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">data</span><span class="o">=</span>file.txt
<span class="nv">url</span><span class="o">=</span>http://www.example.com/<span class="nv">$data</span>
<span class="k">if</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-s</span> <span class="nv">$data</span> <span class="o">]</span><span class="p">;</span><span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"downloading test data..."</span>
    wget <span class="nv">$url</span>
<span class="k">fi</span>
</code></pre></div></div>

<h5 id="wget-to-a-filename-when-a-long-name">Wget to a filename (when a long name)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget <span class="nt">-O</span> filename <span class="s2">"http://example.com"</span>
</code></pre></div></div>

<h5 id="wget-files-to-a-folder">Wget files to a folder</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget <span class="nt">-P</span> /path/to/directory <span class="s2">"http://example.com"</span>
</code></pre></div></div>

<h5 id="instruct-curl-to-follow-any-redirect-until-it-reaches-the-final-destination">Instruct curl to follow any redirect until it reaches the final destination:</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-L</span> google.com
</code></pre></div></div>

<h2 id="random">Random</h2>
<p>[<a href="#handy-bash-one-liners">back to top</a>]</p>
<h5 id="random-generate-password-eg-generate-5-password-each-of-length-13">Random generate password (e.g. generate 5 password each of length 13)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>pwgen
pwgen 13 5
<span class="c">#sahcahS9dah4a xieXaiJaey7xa UuMeo0ma7eic9 Ahpah9see3zai acerae7Huigh7</span>
</code></pre></div></div>

<h5 id="random-pick-100-lines-from-a-file">Random pick 100 lines from a file</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">shuf</span> <span class="nt">-n</span> 100 filename
</code></pre></div></div>

<h5 id="random-order-lucky-draw">Random order (lucky draw)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for </span>i <span class="k">in </span>a b c d e<span class="p">;</span> <span class="k">do </span><span class="nb">echo</span> <span class="nv">$i</span><span class="p">;</span> <span class="k">done</span>| <span class="nb">shuf</span>
</code></pre></div></div>

<h5 id="echo-series-of-random-numbers-between-a-range-eg-shuffle-numbers-from-0-100-then-pick-15-of-them-randomly">Echo series of random numbers between a range (e.g. shuffle numbers from 0-100, then pick 15 of them randomly)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">shuf</span> <span class="nt">-i</span> 0-100 <span class="nt">-n</span> 15
</code></pre></div></div>

<h5 id="echo-a-random-number">Echo a random number</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="nv">$RANDOM</span>
</code></pre></div></div>

<h5 id="random-from-0-9">Random from 0-9</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="k">$((</span>RANDOM <span class="o">%</span> <span class="m">10</span><span class="k">))</span>
</code></pre></div></div>

<h5 id="random-from-1-10">Random from 1-10</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="k">$((</span><span class="o">(</span>RANDOM <span class="o">%</span><span class="m">10</span><span class="o">)+</span><span class="m">1</span><span class="k">))</span>
</code></pre></div></div>

<h2 id="xwindow">Xwindow</h2>
<p>[<a href="#handy-bash-one-liners">back to top</a>]</p>

<p>X11 GUI applications! Here are some GUI tools for you if you get bored by the text-only environment.</p>

<h5 id="enable-x11-forwardingin-order-to-use-graphical-application-on-servers">Enable X11 forwarding,in order to use graphical application on servers</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh <span class="nt">-X</span> user_name@ip_address

<span class="c"># or setting through xhost</span>
<span class="c"># --&gt; Install the following for Centos:</span>
<span class="c"># xorg-x11-xauth</span>
<span class="c"># xorg-x11-fonts-*</span>
<span class="c"># xorg-x11-utils</span>
</code></pre></div></div>

<h5 id="little-xwindow-tools">Little xwindow tools</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xclock
xeyes
xcowsay
</code></pre></div></div>

<h5 id="open-picturesimages-from-ssh-server">Open pictures/images from ssh server</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. ssh <span class="nt">-X</span> user_name@ip_address
2. apt-get <span class="nb">install </span>eog
3. eog picture.png
</code></pre></div></div>

<h5 id="watch-videos-on-server">Watch videos on server</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. ssh <span class="nt">-X</span> user_name@ip_address
2. <span class="nb">sudo </span>apt <span class="nb">install </span>mpv
3. mpv myvideo.mp4
</code></pre></div></div>

<h5 id="use-gedit-on-server-gui-editor">Use gedit on server (GUI editor)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. ssh <span class="nt">-X</span> user_name@ip_address
2. apt-get <span class="nb">install </span>gedit
3. gedit filename.txt
</code></pre></div></div>

<h5 id="open-pdf-file-from-ssh-server">Open PDF file from ssh server</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. ssh <span class="nt">-X</span> user_name@ip_address
2. apt-get <span class="nb">install </span>evince
3. evince filename.pdf
</code></pre></div></div>

<h5 id="use-google-chrome-browser-from-ssh-server">Use google-chrome browser from ssh server</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. ssh <span class="nt">-X</span> user_name@ip_address
2. apt-get <span class="nb">install </span>libxss1 libappindicator1 libindicator7
3. wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
4. <span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-f</span>
5. dpkg <span class="nt">-i</span> google-chrome<span class="k">*</span>.deb
6. google-chrome
</code></pre></div></div>

<h2 id="system">System</h2>
<p>[<a href="#handy-bash-one-liners">back to top</a>]</p>

<h5 id="check-out-whether-selinux-is-enabled">Check out whether SELinux is enabled</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sestatus
<span class="c"># SELinux status:                 enabled</span>
<span class="c"># SELinuxfs mount:                /sys/fs/selinux</span>
<span class="c"># SELinux root directory:         /etc/selinux</span>
<span class="c"># Loaded policy name:             targeted</span>
<span class="c"># Current mode:                   enforcing</span>
<span class="c"># Mode from config file:          enforcing</span>
<span class="c"># Policy MLS status:              enabled</span>
<span class="c"># Policy deny_unknown status:     allowed</span>
<span class="c"># Max kernel policy version:      31</span>
</code></pre></div></div>

<h5 id="generate-public-key-from-private-key">Generate public key from private key</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen <span class="nt">-y</span> <span class="nt">-f</span> ~/.ssh/id_rsa <span class="o">&gt;</span> ~/.ssh/id_rsa.pub
</code></pre></div></div>

<h5 id="copy-your-default-public-key-to-remote-user">Copy your default public key to remote user</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-copy-id &lt;user_name&gt;@&lt;server_IP&gt;
<span class="c"># then you need to enter the password</span>
<span class="c"># and next time you won't need to enter password when ssh to that user</span>
</code></pre></div></div>

<h5 id="copy-default-public-key-to-remote-user-using-the-required-private-key-eg-use-your-mykeypem-key-to-copy-your-id_rsapub-to-the-remote-user">Copy default public key to remote user using the required private key (e.g. use your mykey.pem key to copy your id_rsa.pub to the remote user)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># before you need to use mykey.pem to ssh to remote user.</span>
ssh-copy-id <span class="nt">-i</span> ~/.ssh/id_rsa.pub <span class="nt">-o</span> <span class="s2">"IdentityFile ~/Downloads/mykey.pem"</span> &lt;user_name&gt;@&lt;server_IP&gt;
<span class="c"># now you don't need to use key to ssh to that user.</span>
</code></pre></div></div>

<h5 id="ssh-agent-forwarding">SSH Agent Forwarding</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># To bring your key with you when ssh to serverA, then ssh to serverB from serverA using the key.</span>
ssh-agent
ssh-add /path/to/mykey.pem
ssh <span class="nt">-A</span> &lt;username&gt;@&lt;IP_of_serverA&gt;
<span class="c"># Next you can ssh to serverB</span>
ssh &lt;username&gt;@&lt;IP_of_serverB&gt;
</code></pre></div></div>

<h5 id="follow-the-most-recent-logs-from-service">Follow the most recent logs from service</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>journalctl <span class="nt">-u</span> &lt;service_name&gt; <span class="nt">-f</span>
</code></pre></div></div>

<h5 id="eliminate-the-zombie">Eliminate the zombie</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># A zombie is already dead, so you cannot kill it. You can eliminate the zombie by killing its parent.</span>
<span class="c"># First, find PID of the zombie</span>
ps aux| <span class="nb">grep</span> <span class="s1">'Z'</span>
<span class="c"># Next find the PID of zombie's parent</span>
pstree <span class="nt">-p</span> <span class="nt">-s</span> &lt;zombie_PID&gt;
<span class="c"># Then you can kill its parent and you will notice the zombie is gone.</span>
<span class="nb">sudo kill </span>9 &lt;parent_PID&gt;
</code></pre></div></div>
<h6 id="show-memory-usage">Show memory usage</h6>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>free <span class="nt">-c</span> 10 <span class="nt">-mhs</span> 1
<span class="c"># print 10 times, at 1 second interval</span>
</code></pre></div></div>

<h5 id="display-cpu-and-io-statistics-for-devices-and-partitions">Display CPU and IO statistics for devices and partitions.</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># refresh every second</span>
iostat <span class="nt">-x</span> <span class="nt">-t</span> 1
</code></pre></div></div>

<h5 id="display-bandwidth-usage-on-an-network-interface-eg-enp175s0f0">Display bandwidth usage on an network interface (e.g. enp175s0f0)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iftop <span class="nt">-i</span> enp175s0f0
</code></pre></div></div>

<h5 id="tell-how-long-the-system-has-been-running-and-number-of-users">Tell how long the system has been running and number of users</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">uptime</span>
</code></pre></div></div>

<h5 id="check-if-its-root-running">Check if it’s root running</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$EUID</span><span class="s2">"</span> <span class="nt">-ne</span> 0 <span class="o">]</span><span class="p">;</span> <span class="k">then
        </span><span class="nb">echo</span> <span class="s2">"Please run this as root"</span>
        <span class="nb">exit </span>1
<span class="k">fi</span>
</code></pre></div></div>
<h5 id="change-shell-of-a-user-eg-bonnie">Change shell of a user (e.g. bonnie)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chsh <span class="nt">-s</span> /bin/sh bonnie
<span class="c"># /etc/shells: valid login shells</span>
</code></pre></div></div>

<h5 id="change-root--fake-root--jail-eg-change-root-to-newroot">Change root / fake root / jail (e.g. change root to newroot)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chroot</span> /home/newroot /bin/bash

<span class="c"># To exit chroot</span>
<span class="nb">exit</span>
</code></pre></div></div>
<h5 id="display-file-status-size-access-modify-and-change-time-etc-of-a-file-eg-filenametxt">Display file status (size; access, modify and change time, etc) of a file (e.g. filename.txt)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">stat </span>filename.txt
</code></pre></div></div>

<h5 id="snapshot-of-the-current-processes">Snapshot of the current processes</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ps aux
</code></pre></div></div>

<h5 id="display-a-tree-of-processes">Display a tree of processes</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pstree
</code></pre></div></div>

<h5 id="find-maximum-number-of-processes">Find maximum number of processes</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> /proc/sys/kernel/pid_max
</code></pre></div></div>

<h5 id="print-or-control-the-kernel-ring-buffer">Print or control the kernel ring buffer</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dmesg
</code></pre></div></div>

<h5 id="show-ip-address">Show IP address</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ip</span> add show

<span class="c"># or</span>
ifconfig
</code></pre></div></div>

<h5 id="print-previous-and-current-sysv-runlevel">Print previous and current SysV runlevel</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>runlevel

<span class="c"># or</span>
<span class="nb">who</span> <span class="nt">-r</span>
</code></pre></div></div>

<h5 id="change-sysv-runlevel-eg-5">Change SysV runlevel (e.g. 5)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>init 5
<span class="c">#or</span>
telinit 5
</code></pre></div></div>

<h5 id="display-all-available-services-in-all-runlevels">Display all available services in all runlevels,</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chkconfig <span class="nt">--list</span>
<span class="c"># update-rc.d equivalent to chkconfig in ubuntu</span>
</code></pre></div></div>

<h5 id="check-system-version">Check system version</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> /etc/<span class="k">*</span><span class="nt">-release</span>
</code></pre></div></div>

<h5 id="linux-programmers-manuel-hier--description-of-the-filesystem-hierarchy">Linux Programmer’s Manuel: hier- description of the filesystem hierarchy</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>man hier
</code></pre></div></div>

<h5 id="control-the-systemd-system-and-service-manager">Control the systemd system and service manager</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># e.g. check the status of cron service</span>
systemctl status cron.service

<span class="c"># e.g. stop cron service</span>
systemctl stop cron.service
</code></pre></div></div>

<h5 id="list-job">List job</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">jobs</span> <span class="nt">-l</span>
</code></pre></div></div>

<h5 id="run-a-program-with-modified-priority-eg-testsh">Run a program with modified priority (e.g. ./test.sh)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># nice value is adjustable from -20 (most favorable) to +19</span>
<span class="c"># the nicer the application, the lower the priority</span>
<span class="c"># Default niceness: 10; default priority: 80</span>

<span class="nb">nice</span> <span class="nt">-10</span> ./test.sh
</code></pre></div></div>

<h5 id="export-path">Export PATH</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:~/path/you/want
</code></pre></div></div>

<h5 id="make-file-executable">Make file executable</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod</span> +x filename
<span class="c"># you can now ./filename to execute it</span>
</code></pre></div></div>

<h5 id="print-system-information">Print system information</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">uname</span> <span class="nt">-a</span>

<span class="c"># Check system hardware-platform (x86-64)</span>
<span class="nb">uname</span> <span class="nt">-i</span>
</code></pre></div></div>

<h5 id="surf-the-net">Surf the net</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>links www.google.com
</code></pre></div></div>

<h5 id="add-user-set-passwd">Add user, set passwd</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>useradd username
passwd username
</code></pre></div></div>

<h5 id="edit-variable-for-bash-eg-displaying-the-whole-path">Edit variable for bash, (e.g. displaying the whole path)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. joe ~/.bash_profile
2. <span class="nb">export </span><span class="nv">PS1</span><span class="o">=</span><span class="s1">'\u@\h:\w\$'</span>
<span class="c"># $PS1 is a variable that defines the makeup and style of the command prompt</span>
3. <span class="nb">source</span> ~/.bash_profile
</code></pre></div></div>

<h5 id="edit-environment-setting-eg-alias">Edit environment setting (e.g. alias)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. joe ~/.bash_profile
2. <span class="nb">alias </span><span class="nv">pd</span><span class="o">=</span><span class="s2">"pwd"</span> //no more need to <span class="nb">type </span>that <span class="s1">'w'</span><span class="o">!</span>
3. <span class="nb">source</span> ~/.bash_profile
</code></pre></div></div>
<h5 id="print-all-alias">Print all alias</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">alias</span> <span class="nt">-p</span>
</code></pre></div></div>

<h5 id="unalias-eg-after-alias-lsls-colorauto">Unalias (e.g. after alias ls=’ls –color=auto’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">unalias ls</span>
</code></pre></div></div>

<h5 id="set-and-unset-shell-options">Set and unset shell options</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># print all shell options</span>
<span class="nb">shopt</span>

<span class="c"># to unset (or stop) alias</span>
<span class="nb">shopt</span> <span class="nt">-u</span> expand_aliases

<span class="c"># to set (or start) alias</span>
<span class="nb">shopt</span> <span class="nt">-s</span> expand_aliases
</code></pre></div></div>

<h5 id="list-environment-variables-eg-path">List environment variables (e.g. PATH)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="nv">$PATH</span>
<span class="c"># list of directories separated by a colon</span>
</code></pre></div></div>
<h5 id="list-all-environment-variables-for-current-user">List all environment variables for current user</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">env</span>
</code></pre></div></div>
<h5 id="unset-environment-variable-eg-unset-variable-myvar">Unset environment variable (e.g. unset variable ‘MYVAR’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">unset </span>MYVAR
</code></pre></div></div>

<h5 id="show-partition-format">Show partition format</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lsblk
</code></pre></div></div>

<h5 id="inform-the-os-of-partition-table-changes">Inform the OS of partition table changes</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>partprobe
</code></pre></div></div>

<h5 id="soft-link-program-to-bin">Soft link program to bin</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ln</span> <span class="nt">-s</span> /path/to/program /home/usr/bin
<span class="c"># must be the whole path to the program</span>
</code></pre></div></div>

<h5 id="show-hexadecimal-view-of-data">Show hexadecimal view of data</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hexdump <span class="nt">-C</span> filename.class
</code></pre></div></div>

<h5 id="jump-to-different-node">Jump to different node</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rsh node_name
</code></pre></div></div>

<h5 id="check-port-active-internet-connection">Check port (active internet connection)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>netstat <span class="nt">-tulpn</span>
</code></pre></div></div>

<h5 id="print-resolved-symbolic-links-or-canonical-file-names">Print resolved symbolic links or canonical file names</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">readlink </span>filename
</code></pre></div></div>

<h5 id="find-out-the-type-of-command-and-where-it-link-to-eg-python">Find out the type of command and where it link to (e.g. python)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">type </span>python
<span class="c"># python is /usr/bin/python</span>
<span class="c"># There are 5 different types, check using the 'type -f' flag</span>
<span class="c"># 1. alias    (shell alias)</span>
<span class="c"># 2. function (shell function, type will also print the function body)</span>
<span class="c"># 3. builtin  (shell builtin)</span>
<span class="c"># 4. file     (disk file)</span>
<span class="c"># 5. keyword  (shell reserved word)</span>

<span class="c"># You can also use `which`</span>
which python
<span class="c"># /usr/bin/python</span>
</code></pre></div></div>

<h5 id="list-all-functions-names">List all functions names</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">declare</span> <span class="nt">-F</span>
</code></pre></div></div>

<h5 id="list-total-size-of-a-directory">List total size of a directory</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">du</span> <span class="nt">-hs</span> <span class="nb">.</span>

<span class="c"># or</span>
<span class="nb">du</span> <span class="nt">-sb</span>
</code></pre></div></div>

<h5 id="copy-directory-with-permission-setting">Copy directory with permission setting</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cp</span> <span class="nt">-rp</span> /path/to/directory
</code></pre></div></div>

<h5 id="store-current-directory">Store current directory</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">pushd</span> <span class="nb">.</span>

<span class="c"># then pop</span>
<span class="nb">popd</span>

<span class="c">#or use dirs to display the list of currently remembered directories.</span>
<span class="nb">dirs</span> <span class="nt">-l</span>
</code></pre></div></div>

<h5 id="show-disk-usage">Show disk usage</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">df</span> <span class="nt">-h</span>

<span class="c"># or</span>
<span class="nb">du</span> <span class="nt">-h</span>

<span class="c">#or</span>
<span class="nb">du</span> <span class="nt">-sk</span> /var/log/<span class="k">*</span> |sort <span class="nt">-rn</span> |head <span class="nt">-10</span>
</code></pre></div></div>

<h5 id="show-current-runlevel">Show current runlevel</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>runlevel
</code></pre></div></div>

<h5 id="switch-runlevel">Switch runlevel</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>init 3

<span class="c">#or</span>
telinit 3
</code></pre></div></div>

<h5 id="permanently-modify-runlevel">Permanently modify runlevel</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. edit /etc/init/rc-sysinit.conf
2. <span class="nb">env </span><span class="nv">DEFAULT_RUNLEVEL</span><span class="o">=</span>2
</code></pre></div></div>

<h5 id="become-root">Become root</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>su
</code></pre></div></div>

<h5 id="become-somebody">Become somebody</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>su somebody
</code></pre></div></div>

<h5 id="report-user-quotes-on-device">Report user quotes on device</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>repquota <span class="nt">-auvs</span>
</code></pre></div></div>

<h5 id="get-entries-in-a-number-of-important-databases">Get entries in a number of important databases</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>getent database_name

<span class="c"># (e.g. the 'passwd' database)</span>
getent passwd
<span class="c"># list all user account (all local and LDAP)</span>

<span class="c"># (e.g. fetch list of grop accounts)</span>
getent group
<span class="c"># store in database 'group'</span>
</code></pre></div></div>

<h5 id="change-owner-of-file">Change owner of file</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chown </span>user_name filename
<span class="nb">chown</span> <span class="nt">-R</span> user_name /path/to/directory/
<span class="c"># chown user:group filename</span>
</code></pre></div></div>

<h5 id="mount-and-unmount">Mount and unmount</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># e.g. Mount /dev/sdb to /home/test</span>
mount /dev/sdb /home/test

<span class="c"># e.g. Unmount /home/test</span>
umount /home/test
</code></pre></div></div>

<h5 id="list-current-mount-detail">List current mount detail</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mount
<span class="c"># or</span>
<span class="nb">df</span>
</code></pre></div></div>

<h5 id="list-current-usernames-and-user-numbers">List current usernames and user-numbers</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> /etc/passwd
</code></pre></div></div>

<h5 id="get-all-username">Get all username</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>getent passwd| <span class="nb">awk</span> <span class="s1">'{FS="[:]"; print $1}'</span>
</code></pre></div></div>

<h5 id="show-all-users">Show all users</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">compgen</span> <span class="nt">-u</span>
</code></pre></div></div>

<h5 id="show-all-groups">Show all groups</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">compgen</span> <span class="nt">-g</span>
</code></pre></div></div>

<h5 id="show-group-of-user">Show group of user</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>group username
</code></pre></div></div>

<h5 id="show-uid-gid-group-of-user">Show uid, gid, group of user</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">id </span>username
</code></pre></div></div>

<h5 id="check-if-its-root">Check if it’s root</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">[</span> <span class="si">$(</span><span class="nb">id</span> <span class="nt">-u</span><span class="si">)</span> <span class="nt">-ne</span> 0 <span class="o">]</span><span class="p">;</span><span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"You are not root!"</span>
    <span class="nb">exit</span><span class="p">;</span>
<span class="k">fi</span>
<span class="c"># 'id -u' output 0 if it's not root</span>
</code></pre></div></div>

<h5 id="find-out-cpu-information">Find out CPU information</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>more /proc/cpuinfo

<span class="c"># or</span>
lscpu
</code></pre></div></div>

<h5 id="set-quota-for-user-eg-disk-soft-limit-120586240-hard-limit-125829120">Set quota for user (e.g. disk soft limit: 120586240; hard limit: 125829120)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>setquota username 120586240 125829120 0 0 /home
</code></pre></div></div>

<h5 id="show-quota-for-user">Show quota for user</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>quota <span class="nt">-v</span> username
</code></pre></div></div>

<h5 id="display-current-libraries-from-the-cache">Display current libraries from the cache</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ldconfig <span class="nt">-p</span>
</code></pre></div></div>

<h5 id="print-shared-library-dependencies-eg-for-ls">Print shared library dependencies (e.g. for ‘ls’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ldd /bin/ls
</code></pre></div></div>

<h5 id="check-user-login">Check user login</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lastlog
</code></pre></div></div>
<h5 id="check-last-reboot-history">Check last reboot history</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>last reboot
</code></pre></div></div>

<h5 id="edit-path-for-all-users">Edit path for all users</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>joe /etc/environment
<span class="c"># edit this file</span>
</code></pre></div></div>

<h5 id="show-and-set-user-limit">Show and set user limit</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ulimit</span> <span class="nt">-u</span>
</code></pre></div></div>

<h5 id="which-ports-are-listening-for-tcp-connections-from-the-network">Which ports are listening for TCP connections from the network</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmap <span class="nt">-sT</span> <span class="nt">-O</span> localhost
<span class="c">#notice that some companies might not like you using nmap</span>
</code></pre></div></div>

<h5 id="print-out-number-of-cores-processors">Print out number of cores/ processors</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">nproc</span> <span class="nt">--all</span>
</code></pre></div></div>

<h5 id="check-status-of-each-core">Check status of each core</h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. top
2. press '1'
</code></pre></div></div>

<h5 id="show-jobs-and-pid">Show jobs and PID</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">jobs</span> <span class="nt">-l</span>
</code></pre></div></div>

<h5 id="list-all-running-services">List all running services</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>service <span class="nt">--status-all</span>
</code></pre></div></div>

<h5 id="schedule-shutdown-server">Schedule shutdown server</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shutdown <span class="nt">-r</span> +5 <span class="s2">"Server will restart in 5 minutes. Please save your work."</span>
</code></pre></div></div>

<h5 id="cancel-scheduled-shutdown">Cancel scheduled shutdown</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shutdown <span class="nt">-c</span>
</code></pre></div></div>

<h5 id="broadcast-to-all-users">Broadcast to all users</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wall <span class="nt">-n</span> hihi
</code></pre></div></div>

<h5 id="kill-all-process-of-a-user">Kill all process of a user</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pkill <span class="nt">-U</span> user_name
</code></pre></div></div>

<h5 id="kill-all-process-of-a-program">Kill all process of a program</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">kill</span> <span class="nt">-9</span> <span class="si">$(</span>ps aux | <span class="nb">grep</span> <span class="s1">'program_name'</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>
</code></pre></div></div>

<h5 id="set-gedit-preference-on-server">Set gedit preference on server</h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># You might have to install the following:

apt-get install libglib2.0-bin;
# or
yum install dconf dconf-editor;
yum install dbus dbus-x11;

# Check list
gsettings list-recursively

# Change some settings
gsettings set org.gnome.gedit.preferences.editor highlight-current-line true
gsettings set org.gnome.gedit.preferences.editor scheme 'cobalt'
gsettings set org.gnome.gedit.preferences.editor use-default-font false
gsettings set org.gnome.gedit.preferences.editor editor-font 'Cantarell Regular 12'
</code></pre></div></div>
<h5 id="add-user-to-a-group-eg-add-user-nice-to-the-group-docker-so-that-he-can-run-docker-without-sudo">Add user to a group (e.g add user ‘nice’ to the group ‘docker’, so that he can run docker without sudo)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>gpasswd <span class="nt">-a</span> <span class="nb">nice </span>docker
</code></pre></div></div>

<h5 id="pip-install-python-package-without-root">Pip install python package without root</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. pip <span class="nb">install</span> <span class="nt">--user</span> package_name
2. You might need to <span class="nb">export</span> ~/.local/bin/ to PATH: <span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:~/.local/bin/
</code></pre></div></div>

<h5 id="removing-old-linux-kernels-when-boot-almost-full">Removing old linux kernels (when /boot almost full…)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. <span class="nb">uname</span> <span class="nt">-a</span>  <span class="c">#check current kernel, which should NOT be removed</span>
2. <span class="nb">sudo </span>apt-get purge linux-image-X.X.X-X-generic  <span class="c">#replace old version</span>
</code></pre></div></div>

<h5 id="change-hostname">Change hostname</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo hostname </span>your-new-name

<span class="c"># if not working, do also:</span>
hostnamectl set-hostname your-new-hostname
<span class="c"># then check with:</span>
hostnamectl
<span class="c"># Or check /etc/hostname</span>

<span class="c"># If still not working..., edit:</span>
/etc/sysconfig/network
/etc/sysconfig/network-scripts/ifcfg-ensxxx
<span class="c">#add HOSTNAME="your-new-hostname"</span>
</code></pre></div></div>

<h5 id="list-installed-packages">List installed packages</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt list <span class="nt">--installed</span>

<span class="c"># or on Red Hat:</span>
yum list installed
</code></pre></div></div>

<h5 id="check-which-file-make-the-device-busy-on-umount">Check which file make the device busy on umount</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lsof /mnt/dir
</code></pre></div></div>

<h5 id="when-sound-not-working">When sound not working</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>killall pulseaudio
<span class="c"># then press Alt-F2 and type in pulseaudio</span>
</code></pre></div></div>

<h5 id="when-sound-not-working-1">When sound not working</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>killall pulseaudio
</code></pre></div></div>

<h5 id="list-information-about-scsi-devices">List information about SCSI devices</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lsscsi
</code></pre></div></div>

<h5 id="tutorial-for-setting-up-your-own-dns-server">Tutorial for setting up your own DNS server</h5>
<p>http://onceuponmine.blogspot.tw/2017/08/set-up-your-own-dns-server.html</p>

<h5 id="tutorial-for-creating-a-simple-daemon">Tutorial for creating a simple daemon</h5>
<p>http://onceuponmine.blogspot.tw/2017/07/create-your-first-simple-daemon.html</p>

<h5 id="tutorial-for-using-your-gmail-to-send-email">Tutorial for using your gmail to send email</h5>
<p>http://onceuponmine.blogspot.tw/2017/10/setting-up-msmtprc-and-use-your-gmail.html</p>

<p>##### Using telnet to test open ports, test if you can connect to a port (e.g 53) of a server (e.g 192.168.2.106)</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>telnet 192.168.2.106 53
</code></pre></div></div>

<h5 id="change-network-maximum-transmission-unit-mtu-eg-change-to-9000">Change network maximum transmission unit (mtu) (e.g. change to 9000)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ifconfig eth0 mtu 9000
</code></pre></div></div>

<h5 id="get-pid-of-a-running-process-eg-python">Get pid of a running process (e.g python)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pidof python

<span class="c"># or</span>
ps aux|grep python
</code></pre></div></div>
<h5 id="ntp">NTP</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Start ntp:</span>
ntpd

<span class="c"># Check ntp:</span>
ntpq <span class="nt">-p</span>
</code></pre></div></div>

<h5 id="remove-unnecessary-files-to-clean-your-server">Remove unnecessary files to clean your server</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get autoremove
<span class="nb">sudo </span>apt-get clean
<span class="nb">sudo rm</span> <span class="nt">-rf</span> ~/.cache/thumbnails/<span class="k">*</span>

<span class="c"># Remove old kernal:</span>
<span class="nb">sudo </span>dpkg <span class="nt">--list</span> <span class="s1">'linux-image*'</span>
<span class="nb">sudo </span>apt-get remove linux-image-OLDER_VERSION
</code></pre></div></div>

<h5 id="increase-resize-root-partition-root-partition-is-an-lvm-logical-volume">Increase/ resize root partition (root partition is an LVM logical volume)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pvscan
lvextend <span class="nt">-L</span> +130G /dev/rhel/root <span class="nt">-r</span>
<span class="c"># Adding -r will grow filesystem after resizing the volume.</span>
</code></pre></div></div>

<h5 id="create-a-uefi-bootable-usb-drive-eg-devsdc1">Create a UEFI Bootable USB drive (e.g. /dev/sdc1)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo dd </span><span class="k">if</span><span class="o">=</span>~/path/to/isofile.iso <span class="nv">of</span><span class="o">=</span>/dev/sdc1 <span class="nv">oflag</span><span class="o">=</span>direct <span class="nv">bs</span><span class="o">=</span>1048576
</code></pre></div></div>

<h5 id="locate-and-remove-a-package">Locate and remove a package</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>dpkg <span class="nt">-l</span> | <span class="nb">grep</span> &lt;package_name&gt;
<span class="nb">sudo </span>dpkg <span class="nt">--purge</span> &lt;package_name&gt;
</code></pre></div></div>

<h5 id="create-a-ssh-tunnel">Create a ssh tunnel</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh <span class="nt">-f</span> <span class="nt">-L</span> 9000:targetservername:8088 root@192.168.14.72 <span class="nt">-N</span>
<span class="c">#-f: run in background; -L: Listen; -N: do nothing</span>
<span class="c">#the 9000 of your computer is now connected to the 8088 port of the targetservername through 192.168.14.72</span>
<span class="c">#so that you can see the content of targetservername:8088 by entering localhost:9000 from your browser.</span>
</code></pre></div></div>
<h5 id="get-process-id-of-a-process-eg-sublime_text">Get process ID of a process (e.g. sublime_text)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#pidof</span>
pidof sublime_text

<span class="c">#pgrep, you don't have to type the whole program name</span>
pgrep sublim

<span class="c">#pgrep, echo 1 if process found, echo 0 if no such process</span>
pgrep <span class="nt">-q</span> sublime_text <span class="o">&amp;&amp;</span> <span class="nb">echo </span>1 <span class="o">||</span> <span class="nb">echo </span>0

<span class="c">#top, takes longer time</span>
top|grep sublime_text
</code></pre></div></div>

<h5 id="some-benchmarking-tools-for-your-server">Some benchmarking tools for your server</h5>
<p><a href="https://openbenchmarking.org/test/pts/aio-stress">aio-stress</a> - AIO benchmark.
<a href="https://zsmith.co/bandwidth.html">bandwidth</a> - memory bandwidth benchmark.
<a href="https://www.coker.com.au/bonnie++/">bonnie++</a> - hard drive and file system performance benchmark.
<a href="https://dbench.samba.org/">dbench</a> -  generate I/O workloads to either a filesystem or to a networked CIFS or NFS server.
<a href="https://www.dnsperf.com/">dnsperf</a> - authorative and recursing DNS servers.
<a href="https://github.com/filebench/filebench">filebench</a> - model based file system workload generator.
<a href="https://linux.die.net/man/1/fio">fio</a> - I/O  benchmark.
<a href="https://github.com/josefbacik/fs_mark">fs_mark</a> - synchronous/async file creation benchmark.
<a href="https://github.com/httperf/httperf">httperf</a> - measure web server performance.
<a href="https://github.com/ckolivas/interbench">interbench</a> - linux interactivity  benchmark.
<a href="https://labs.vmware.com/flings/ioblazer">ioblazer</a> - multi-platform storage stack micro-benchmark.
<a href="http://www.iozone.org/">iozone</a> - filesystem benchmark.
<a href="https://iperf.fr/iperf-download.php">iperf3</a> - measure TCP/UDP/SCTP performance.
<a href="https://github.com/knurd/kcbench">kcbench</a> - kernel compile benchmark, compiles a kernel and measures the time it takes.
<a href="http://www.bitmover.com/lmbench/">lmbench</a> - Suite of simple, portable benchmarks.
<a href="https://github.com/HewlettPackard/netperf">netperf</a> - measure network performance, test unidirectional throughput, and end-to-end latency.
<a href="https://linux.die.net/man/1/netpipe">netpipe</a> - network protocol independent performance evaluator.
<a href="http://wiki.linux-nfs.org/wiki/index.php/NFSometer">nfsometer</a> - NFS performance framework.
<a href="https://www.nuttcp.net/Welcome%20Page.html">nuttcp</a> - measure network performance.
<a href="https://www.phoronix-test-suite.com/">phoronix-test-suite</a> - comprehensive automated testing and benchmarking platform.
<a href="https://github.com/fidlej/seeker">seeker</a> - portable disk seek benchmark.
<a href="https://github.com/JoeDog/siege">siege</a> - http load tester and benchmark.
<a href="https://github.com/Mellanox/sockperf">sockperf</a> - network benchmarking utility over socket API.
<a href="https://linux.die.net/man/1/spew">spew</a> - measures I/O performance and/or generates I/O load.
<a href="https://people.seas.harvard.edu/~apw/stress/">stress</a> - workload generator for POSIX systems.
<a href="https://github.com/akopytov/sysbench">sysbench</a> - scriptable database and system performance benchmark.
<a href="https://github.com/mkuoppal/tiobench">tiobench</a> - threaded IO benchmark.
<a href="https://github.com/kdlucas/byte-unixbench">unixbench</a> - the original BYTE UNIX benchmark suite, provide a basic indicator of the performance of a Unix-like system.
<a href="https://github.com/wg/wrk">wrk</a> - HTTP benchmark.</p>

<h5 id="show-a-listing-of-last-logged-in-users">Show a listing of last logged in users.</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lastb
</code></pre></div></div>

<h5 id="show-a-listing-of-current-logged-in-users-print-information-of-them">Show a listing of current logged in users, print information of them</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">who</span>
</code></pre></div></div>
<h5 id="show-who-is-logged-on-and-what-they-are-doing">Show who is logged on and what they are doing</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>w
</code></pre></div></div>

<h5 id="print-the-user-names-of-users-currently-logged-in-to-the-current-host">Print the user names of users currently logged in to the current host.</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">users</span>
</code></pre></div></div>

<h5 id="stop-tailing-a-file-on-program-terminate">Stop tailing a file on program terminate</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tail</span> <span class="nt">-f</span> <span class="nt">--pid</span><span class="o">=</span>&lt;PID&gt; filename.txt
<span class="c"># replace &lt;PID&gt; with the process ID of the program.</span>
</code></pre></div></div>

<h5 id="list-all-enabled-services">List all enabled services</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl list-unit-files|grep enabled
</code></pre></div></div>

<h2 id="hardware">Hardware</h2>
<p>[<a href="#handy-bash-one-liners">back to top</a>]</p>

<h5 id="collect-and-summarize-all-hardware-info-of-your-machine">Collect and summarize all hardware info of your machine</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lshw <span class="nt">-json</span> <span class="o">&gt;</span>report.json
<span class="c"># Other options are: [ -html ]  [ -short ]  [ -xml ]  [ -json ]  [ -businfo ]  [ -sanitize ] ,etc</span>
</code></pre></div></div>

<h5 id="finding-out-memory-device-detail">Finding Out memory device detail</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>dmidecode <span class="nt">-t</span> memory
</code></pre></div></div>

<h5 id="print-detail-of-cpu-hardware">Print detail of CPU hardware</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dmidecode <span class="nt">-t</span> 4
<span class="c">#          Type   Information</span>
<span class="c">#          0   BIOS</span>
<span class="c">#          1   System</span>
<span class="c">#          2   Base Board</span>
<span class="c">#          3   Chassis</span>
<span class="c">#          4   Processor</span>
<span class="c">#          5   Memory Controller</span>
<span class="c">#          6   Memory Module</span>
<span class="c">#          7   Cache</span>
<span class="c">#          8   Port Connector</span>
<span class="c">#          9   System Slots</span>
<span class="c">#         11   OEM Strings</span>
<span class="c">#         13   BIOS Language</span>
<span class="c">#         15   System Event Log</span>
<span class="c">#         16   Physical Memory Array</span>
<span class="c">#         17   Memory Device</span>
<span class="c">#         18   32-bit Memory Error</span>
<span class="c">#         19   Memory Array Mapped Address</span>
<span class="c">#         20   Memory Device Mapped Address</span>
<span class="c">#         21   Built-in Pointing Device</span>
<span class="c">#         22   Portable Battery</span>
<span class="c">#         23   System Reset</span>
<span class="c">#         24   Hardware Security</span>
<span class="c">#         25   System Power Controls</span>
<span class="c">#         26   Voltage Probe</span>
<span class="c">#         27   Cooling Device</span>
<span class="c">#         28   Temperature Probe</span>
<span class="c">#         29   Electrical Current Probe</span>
<span class="c">#         30   Out-of-band Remote Access</span>
<span class="c">#         31   Boot Integrity Services</span>
<span class="c">#         32   System Boot</span>
<span class="c">#         34   Management Device</span>
<span class="c">#         35   Management Device Component</span>
<span class="c">#         36   Management Device Threshold Data</span>
<span class="c">#         37   Memory Channel</span>
<span class="c">#         38   IPMI Device</span>
<span class="c">#         39   Power Supply</span>
</code></pre></div></div>
<h5 id="count-the-number-of-segate-hard-disks">Count the number of Segate hard disks</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lsscsi|grep SEAGATE|wc <span class="nt">-l</span>
<span class="c"># or</span>
sg_map <span class="nt">-i</span> <span class="nt">-x</span>|grep SEAGATE|wc <span class="nt">-l</span>
</code></pre></div></div>

<h5 id="get-uuid-of-a-disk-eg-sdb">Get UUID of a disk (e.g. sdb)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>blkid /dev/sdb
</code></pre></div></div>

<h5 id="generate-an-uuid">Generate an UUID</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>uuidgen
</code></pre></div></div>

<h5 id="print-detail-of-all-hard-disks">Print detail of all hard disks</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lsblk <span class="nt">-io</span> KNAME,TYPE,MODEL,VENDOR,SIZE,ROTA
<span class="c">#where ROTA means rotational device / spinning hard disks (1 if true, 0 if false)</span>
</code></pre></div></div>

<h5 id="list-all-pci-peripheral-component-interconnect-devices">List all PCI (Peripheral Component Interconnect) devices</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lspci
<span class="c"># List information about NIC</span>
lspci | egrep <span class="nt">-i</span> <span class="nt">--color</span> <span class="s1">'network|ethernet'</span>
</code></pre></div></div>

<h5 id="list-all-usb-devices">List all USB devices</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lsusb
</code></pre></div></div>

<h5 id="linux-modules">Linux modules</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Show the status of modules in the Linux Kernel</span>
lsmod

<span class="c"># Add and remove modules from the Linux Kernel</span>
modprobe

<span class="c"># or</span>
<span class="c"># Remove a module</span>
rmmod

<span class="c"># Insert a module</span>
insmod
</code></pre></div></div>

<h5 id="controlling-ipmi-enabled-devices-eg-bmc">Controlling IPMI-enabled devices (e.g. BMC)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Remotely finding out power status of the server</span>
ipmitool <span class="nt">-U</span> &lt;bmc_username&gt; <span class="nt">-P</span> &lt;bmc_password&gt; <span class="nt">-I</span> lanplus <span class="nt">-H</span> &lt;bmc_ip_address&gt; power status

<span class="c"># Remotely switching on server</span>
ipmitool <span class="nt">-U</span> &lt;bmc_username&gt; <span class="nt">-P</span> &lt;bmc_password&gt; <span class="nt">-I</span> lanplus <span class="nt">-H</span> &lt;bmc_ip_address&gt; power on

<span class="c"># Turn on panel identify light (default 15s)</span>
ipmitool chassis identify 255

<span class="c"># Found out server sensor temperature</span>
ipmitool sensors |grep <span class="nt">-i</span> Temp

<span class="c"># Reset BMC</span>
ipmitool bmc reset cold

<span class="c"># Prnt BMC network</span>
ipmitool lan print 1

<span class="c"># Setting BMC network</span>
ipmitool <span class="nt">-I</span> bmc lan <span class="nb">set </span>1 ipaddr 192.168.0.55
ipmitool <span class="nt">-I</span> bmc lan <span class="nb">set </span>1 netmask 255.255.255.0
ipmitool <span class="nt">-I</span> bmc lan <span class="nb">set </span>1 defgw ipaddr 192.168.0.1
</code></pre></div></div>

<h2 id="networking">Networking</h2>
<p>[<a href="#handy-bash-one-liners">back to top</a>]</p>

<h5 id="resolve-a-domain-to-an-ip-address-in-a-bash-script">Resolve a domain to an IP address in a Bash script?</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dig +short www.example.com
</code></pre></div></div>

<h5 id="show-the-ssl-certificate-of-a-domain">Show the SSL certificate of a domain</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>openssl s_client <span class="nt">-showcerts</span> <span class="nt">-connect</span> www.example.com:443
</code></pre></div></div>

<h5 id="display-ip-address">Display IP address</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip a
</code></pre></div></div>

<h5 id="display-route-table">Display route table</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip r
</code></pre></div></div>

<h5 id="display-arp-cache-arp-cache-displays-the-mac-addresses-of-device-in-the-same-network-that-you-have-connected-to">Display ARP cache (ARP cache displays the MAC addresses of device in the same network that you have connected to)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip n
</code></pre></div></div>

<h5 id="add-transient-ip-addres-reset-after-reboot-eg-add-192168140324-to-device-eno16777736">Add transient IP addres (reset after reboot) (e.g. add 192.168.140.3/24 to device eno16777736)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip address add 192.168.140.3/24 dev eno16777736
</code></pre></div></div>

<h5 id="persisting-network-configuration-changes">Persisting network configuration changes</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>vi /etc/sysconfig/network-scripts/ifcfg-enoxxx
<span class="c"># then edit the fields: BOOTPROT, DEVICE, IPADDR, NETMASK, GATEWAY, DNS1 etc</span>
</code></pre></div></div>
<h5 id="refresh-networkmanager">Refresh NetworkManager</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nmcli c reload
</code></pre></div></div>

<h5 id="restart-all-interfaces">Restart all interfaces</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart network.service
</code></pre></div></div>

<h5 id="to-view-hostname-os-kernal-architecture-at-the-same-time">To view hostname, OS, kernal, architecture at the same time!</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hostnamectl
</code></pre></div></div>

<h5 id="set-hostname-set-all-transient-static-pretty-hostname-at-once">Set hostname (set all transient, static, pretty hostname at once)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hostnamectl set-hostname <span class="s2">"mynode"</span>
</code></pre></div></div>

<h5 id="find-out-the-web-server-eg-nginx-or-apache-of-a-website">Find out the web server (e.g Nginx or Apache) of a website</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-I</span> http://example.com/
<span class="c"># HTTP/1.1 200 OK</span>
<span class="c"># Server: nginx</span>
<span class="c"># Date: Thu, 02 Jan 2020 07:01:07 GMT</span>
<span class="c"># Content-Type: text/html</span>
<span class="c"># Content-Length: 1119</span>
<span class="c"># Connection: keep-alive</span>
<span class="c"># Vary: Accept-Encoding</span>
<span class="c"># Last-Modified: Mon, 09 Sep 2019 10:37:49 GMT</span>
<span class="c"># ETag: "xxxxxx"</span>
<span class="c"># Accept-Ranges: bytes</span>
<span class="c"># Vary: Accept-Encoding</span>
</code></pre></div></div>

<h2 id="data-wrangling">Data wrangling</h2>
<p>[<a href="#handy-bash-one-liners">back to top</a>]</p>

<h5 id="print-some-words-that-start-with-a-particular-string-eg-words-start-with-phy">Print some words that start with a particular string (e.g. words start with ‘phy’)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># If file is not specified, the file /usr/share/dict/words is used.</span>
look phy|head <span class="nt">-n</span> 10
<span class="c"># Phil</span>
<span class="c"># Philadelphia</span>
<span class="c"># Philadelphia's</span>
<span class="c"># Philby</span>
<span class="c"># Philby's</span>
<span class="c"># Philip</span>
<span class="c"># Philippe</span>
<span class="c"># Philippe's</span>
<span class="c"># Philippians</span>
<span class="c"># Philippine</span>
</code></pre></div></div>

<h5 id="repeat-printing-string-n-times-eg-print-hello-world-five-times">Repeat printing string n times (e.g. print ‘hello world’ five times)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">printf</span> <span class="s1">'hello world\n%.0s'</span> <span class="o">{</span>1..5<span class="o">}</span>
</code></pre></div></div>
<h5 id="do-not-echo-the-trailing-newline">Do not echo the trailing newline</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">username</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"bashoneliner"</span><span class="sb">`</span>
</code></pre></div></div>

<h5 id="copy-a-file-to-multiple-files-eg-copy-filea-to-fileb-d">Copy a file to multiple files (e.g copy fileA to file(B-D))</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tee</span> &lt;fileA fileB fileC fileD <span class="o">&gt;</span>/dev/null
</code></pre></div></div>

<h5 id="remove-newline--nextline">Remove newline / nextline</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tr</span> <span class="nt">--delete</span> <span class="s1">'\n'</span> &lt;input.txt <span class="o">&gt;</span>output.txt
</code></pre></div></div>
<h5 id="replace-newline">Replace newline</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tr</span> <span class="s1">'\n'</span> <span class="s1">' '</span> &lt;filename
</code></pre></div></div>

<h5 id="to-uppercaselowercase">To uppercase/lowercase</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tr</span> /a-z/ /A-Z/
</code></pre></div></div>
<h5 id="translate-a-range-of-characters-eg-substitute-a-z-into-a">Translate a range of characters (e.g. substitute a-z into a)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s1">'something'</span> |tr a-z a
<span class="c"># aaaaaaaaa</span>
</code></pre></div></div>

<h5 id="compare-two-files-eg-filea-fileb">Compare two files (e.g. fileA, fileB)</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>diff fileA fileB
<span class="c"># a: added; d:delete; c:changed</span>

<span class="c"># or</span>
sdiff fileA fileB
<span class="c"># side-to-side merge of file differences</span>
</code></pre></div></div>

<h5 id="compare-two-files-strip-trailing-carriage-return-nextline-eg-filea-fileb">Compare two files, strip trailing carriage return/ nextline (e.g. fileA, fileB)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> diff fileA fileB <span class="nt">--strip-trailing-cr</span>
</code></pre></div></div>

<h5 id="number-a-file-eg-filea">Number a file (e.g. fileA)</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">nl </span>fileA

<span class="c">#or</span>
<span class="nb">nl</span> <span class="nt">-nrz</span> fileA
<span class="c"># add leading zeros</span>

<span class="c">#or</span>
<span class="nb">nl</span> <span class="nt">-w1</span> <span class="nt">-s</span> <span class="s1">' '</span>
<span class="c"># making it simple, blank separate</span>
</code></pre></div></div>

<h5 id="join-two-files-field-by-field-with-tab-default-join-by-the-first-column-of-both-file-and-default-separator-is-space">Join two files field by field with tab (default join by the first column of both file, and default separator is space)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># fileA and fileB should have the same ordering of lines.</span>
<span class="nb">join</span> <span class="nt">-t</span> <span class="s1">'\t'</span> fileA fileB

<span class="c"># Join using specified field (e.g. column 3 of fileA and column 5 of fileB)</span>
<span class="nb">join</span> <span class="nt">-1</span> 3 <span class="nt">-2</span> 5 fileA fileB
</code></pre></div></div>

<h5 id="combine-paste-two-or-more-files-into-columns-eg-filea-fileb-filec">Combine/ paste two or more files into columns (e.g. fileA, fileB, fileC)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">paste </span>fileA fileB fileC
<span class="c"># default tab separate</span>
</code></pre></div></div>

<h5 id="groupcombine-rows-into-one-row">Group/combine rows into one row</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># e.g.</span>
<span class="c"># AAAA</span>
<span class="c"># BBBB</span>
<span class="c"># CCCC</span>
<span class="c"># DDDD</span>
<span class="nb">cat </span>filename|paste - -
<span class="c"># AAAABBBB</span>
<span class="c"># CCCCDDDD</span>
<span class="nb">cat </span>filename|paste - - - -
<span class="c"># AAAABBBBCCCCDDDD</span>
</code></pre></div></div>

<h5 id="fastq-to-fasta-fastq-and-fasta-are-common-file-formats-for-bioinformatics-sequence-data">Fastq to fasta (fastq and fasta are common file formats for bioinformatics sequence data)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>file.fastq | <span class="nb">paste</span> - - - - | <span class="nb">sed</span> <span class="s1">'s/^@/&gt;/g'</span>| <span class="nb">cut</span> <span class="nt">-f1-2</span> | <span class="nb">tr</span> <span class="s1">'\t'</span> <span class="s1">'\n'</span> <span class="o">&gt;</span>file.fa
</code></pre></div></div>

<h5 id="reverse-string">Reverse string</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo </span>12345| rev
</code></pre></div></div>

<h5 id="generate-sequence-1-10">Generate sequence 1-10</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">seq </span>10
</code></pre></div></div>

<h5 id="find-average-of-input-listfile-of-integers">Find average of input list/file of integers</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">i</span><span class="o">=</span><span class="sb">`</span><span class="nb">wc</span> <span class="nt">-l</span> filename|cut <span class="nt">-d</span> <span class="s1">' '</span> <span class="nt">-f1</span><span class="sb">`</span><span class="p">;</span> <span class="nb">cat </span>filename| <span class="nb">echo</span> <span class="s2">"scale=2;(</span><span class="sb">`</span><span class="nb">paste</span> <span class="nt">-sd</span>+<span class="sb">`</span><span class="s2">)/"</span><span class="nv">$i</span>|bc
</code></pre></div></div>

<h5 id="generate-all-combination-eg-12">Generate all combination (e.g. 1,2)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="o">{</span>1,2<span class="o">}{</span>1,2<span class="o">}</span>
<span class="c"># 1 1, 1 2, 2 1, 2 2</span>
</code></pre></div></div>

<h5 id="generate-all-combination-eg-atcg">Generate all combination (e.g. A,T,C,G)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">set</span> <span class="o">=</span> <span class="o">{</span>A,T,C,G<span class="o">}</span>
<span class="nv">group</span><span class="o">=</span> 5
<span class="k">for</span> <span class="o">((</span><span class="nv">i</span><span class="o">=</span>0<span class="p">;</span> i&lt;<span class="nv">$group</span><span class="p">;</span> i++<span class="o">))</span><span class="p">;</span><span class="k">do
    </span><span class="nv">repetition</span><span class="o">=</span><span class="nv">$set$repetition</span><span class="p">;</span><span class="k">done
    </span>bash <span class="nt">-c</span> <span class="s2">"echo "</span><span class="nv">$repetition</span><span class="s2">""</span>
</code></pre></div></div>

<h5 id="read-file-content-to-variable">Read file content to variable</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">foo</span><span class="o">=</span><span class="si">$(</span>&lt;test1<span class="si">)</span>
</code></pre></div></div>

<h5 id="echo-size-of-variable">Echo size of variable</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="k">${#</span><span class="nv">foo</span><span class="k">}</span>
</code></pre></div></div>

<h5 id="echo-a-tab">Echo a tab</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="nt">-e</span> <span class="s1">' \t '</span>
</code></pre></div></div>

<h5 id="split-file-into-smaller-file">Split file into smaller file</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Split by line (e.g. 1000 lines/smallfile)</span>
<span class="nb">split</span> <span class="nt">-d</span> <span class="nt">-l</span> 1000 largefile.txt

<span class="c"># Split by byte without breaking lines across files</span>
<span class="nb">split</span> <span class="nt">-C</span> 10 largefile.txt
</code></pre></div></div>

<h5 id="create-a-large-amount-of-dummy-files-eg-100000-files-10-bytes-each">Create a large amount of dummy files (e.g 100000 files, 10 bytes each):</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#1. Create a big file</span>
<span class="nb">dd </span><span class="k">if</span><span class="o">=</span>/dev/zero <span class="nv">of</span><span class="o">=</span>bigfile <span class="nv">bs</span><span class="o">=</span>1 <span class="nv">count</span><span class="o">=</span>1000000

<span class="c">#2. Split the big file to 100000 10-bytes files</span>
 <span class="nb">split</span> <span class="nt">-b</span> 10 <span class="nt">-a</span> 10 bigfile
</code></pre></div></div>

<h5 id="rename-all-files-eg-remove-abc-from-all-gz-files">Rename all files (e.g. remove ABC from all .gz files)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rename <span class="s1">'s/ABC//'</span> <span class="k">*</span>.gz
</code></pre></div></div>

<h5 id="remove-file-extension-eg-remove-gz-from-filenamegz">Remove file extension (e.g remove .gz from filename.gz)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">basename </span>filename.gz .gz

zcat filename.gz&gt; <span class="si">$(</span><span class="nb">basename </span>filename.gz .gz<span class="si">)</span>.unpacked
</code></pre></div></div>

<h5 id="add-file-extension-to-all-fileeg-add-txt">Add file extension to all file(e.g add .txt)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rename s/<span class="nv">$/</span>.txt/ <span class="k">*</span>
<span class="c"># You can use rename -n s/$/.txt/ * to check the result first, it will only print sth like this:</span>
<span class="c"># rename(a, a.txt)</span>
<span class="c"># rename(b, b.txt)</span>
<span class="c"># rename(c, c.txt)</span>
</code></pre></div></div>

<h5 id="squeeze-repeat-patterns-eg-tt--t">Squeeze repeat patterns (e.g. /t/t –&gt; /t)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tr</span> <span class="nt">-s</span> <span class="s2">"/t"</span> &lt; filename
</code></pre></div></div>

<h5 id="do-not-print-nextline-with-echo">Do not print nextline with echo</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="nt">-e</span> <span class="s1">'text here \c'</span>
</code></pre></div></div>

<h5 id="view-first-50-characters-of-file">View first 50 characters of file</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">head</span> <span class="nt">-c</span> 50 file
</code></pre></div></div>

<h5 id="cut-and-get-last-column-of-a-file">Cut and get last column of a file</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>file|rev | <span class="nb">cut</span> <span class="nt">-d</span>/ <span class="nt">-f1</span> | rev
</code></pre></div></div>

<h5 id="add-one-to-variableincrement-i-a-numeric-variable-eg-var">Add one to variable/increment/ i++ a numeric variable (e.g. $var)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">((</span>var++<span class="o">))</span>
<span class="c"># or</span>
<span class="nv">var</span><span class="o">=</span><span class="k">$((</span>var+1<span class="k">))</span>

</code></pre></div></div>
<h5 id="cut-the-last-column">Cut the last column</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>filename|rev|cut <span class="nt">-f1</span>|rev
</code></pre></div></div>

<h5 id="cat-to-a-file">Cat to a file</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> <span class="o">&gt;</span>myfile
<span class="nb">let </span>me add sth here
<span class="nb">exit </span>by control + c
^C
</code></pre></div></div>

<h5 id="clear-the-contents-of-a-file-eg-filename">Clear the contents of a file (e.g. filename)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span>filename
</code></pre></div></div>

<h5 id="append-to-file-eg-hihi">Append to file (e.g. hihi)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s1">'hihi'</span> <span class="o">&gt;&gt;</span>filename
</code></pre></div></div>

<h5 id="working-with-json-data">Working with json data</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#install the useful jq package</span>
<span class="c">#sudo apt-get install jq</span>
<span class="c">#e.g. to get all the values of the 'url' key, simply pipe the json to the following jq command(you can use .[]. to select inner json, i.e jq '.[].url')</span>
<span class="nb">cat </span>file.json | jq <span class="s1">'.url'</span>
</code></pre></div></div>

<h5 id="decimal-to-binary-eg-get-binary-of-5">Decimal to Binary (e.g get binary of 5)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">D2B</span><span class="o">=({</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">})</span>
<span class="nb">echo</span> <span class="nt">-e</span> <span class="k">${</span><span class="nv">D2B</span><span class="p">[5]</span><span class="k">}</span>
<span class="c">#00000101</span>
<span class="nb">echo</span> <span class="nt">-e</span> <span class="k">${</span><span class="nv">D2B</span><span class="p">[255]</span><span class="k">}</span>
<span class="c">#11111111</span>
</code></pre></div></div>

<h5 id="wrap-each-input-line-to-fit-in-specified-width-eg-4-integers-per-line">Wrap each input line to fit in specified width (e.g 4 integers per line)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"00110010101110001101"</span> | <span class="nb">fold</span> <span class="nt">-w4</span>
<span class="c"># 0011</span>
<span class="c"># 0010</span>
<span class="c"># 1011</span>
<span class="c"># 1000</span>
<span class="c"># 1101</span>
</code></pre></div></div>

<h5 id="sort-a-file-by-column-and-keep-the-original-order">Sort a file by column and keep the original order</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sort</span> <span class="nt">-k3</span>,3 <span class="nt">-s</span>
</code></pre></div></div>

<h5 id="right-align-a-column-right-align-the-2nd-column">Right align a column (right align the 2nd column)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>file.txt|rev|column <span class="nt">-t</span>|rev
</code></pre></div></div>

<h5 id="to-both-view-and-store-the-output">To both view and store the output</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s1">'hihihihi'</span> | <span class="nb">tee </span>outputfile.txt
<span class="c"># use '-a' with tee to append to file.</span>
</code></pre></div></div>

<h5 id="show-non-printing-ctrl-characters-with-cat">Show non-printing (Ctrl) characters with cat</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> <span class="nt">-v</span> filename
</code></pre></div></div>

<h5 id="convert-tab-to-space">Convert tab to space</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">expand </span>filename
</code></pre></div></div>

<h5 id="convert-space-to-tab">Convert space to tab</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">unexpand </span>filename
</code></pre></div></div>

<h5 id="display-file-in-octal--you-can-also-use-od-to-display-hexadecimal-decimal-etc">Display file in octal ( you can also use od to display hexadecimal, decimal, etc)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">od </span>filename
</code></pre></div></div>

<h5 id="reverse-cat-a-file">Reverse cat a file</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tac </span>filename
</code></pre></div></div>

<h5 id="reverse-the-result-from-uniq--c">Reverse the result from <code class="language-plaintext highlighter-rouge">uniq -c</code></h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">while </span><span class="nb">read </span>a b<span class="p">;</span> <span class="k">do </span><span class="nb">yes</span> <span class="nv">$b</span> |head <span class="nt">-n</span> <span class="nv">$a</span> <span class="p">;</span><span class="k">done</span> &lt;test.txt
</code></pre></div></div>

<h2 id="others">Others</h2>
<p>[<a href="#handy-bash-one-liners">back to top</a>]</p>

<h5 id="bash-auto-complete-eg-show-options-now-tomorrow-never-when-you-presstab-after-typing-dothis">Bash auto-complete (e.g. show options “now tomorrow never” when you press’tab’ after typing “dothis”)</h5>
<p><a href="https://iridakos.com/tutorials/2018/03/01/bash-programmable-completion-tutorial.html">More examples</a></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">complete</span> <span class="nt">-W</span> <span class="s2">"now tomorrow never"</span> dothis
<span class="c"># ~$ dothis  </span>
<span class="c"># never     now       tomorrow</span>
<span class="c"># press 'tab' again to auto-complete after typing 'n' or 't'</span>
</code></pre></div></div>
<h5 id="displays-a-calendar">Displays a calendar</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># print the current month, today will be highlighted.</span>
cal
<span class="c"># October 2019      </span>
<span class="c"># Su Mo Tu We Th Fr Sa  </span>
<span class="c">#    1  2  3  4  5  </span>
<span class="c"># 6  7  8  9 10 11 12  </span>
<span class="c"># 13 14 15 16 17 18 19  </span>
<span class="c"># 20 21 22 23 24 25 26  </span>
<span class="c"># 27 28 29 30 31  </span>

<span class="c"># only display November</span>
cal <span class="nt">-m</span> 11
</code></pre></div></div>
<h5 id="forces-applications-to-use-the-default-language-for-output">Forces applications to use the default language for output</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">LC_ALL</span><span class="o">=</span>C

<span class="c"># to revert:</span>
<span class="nb">unset </span>LC_ALL
</code></pre></div></div>
<h5 id="encode-strings-as-base64-strings">Encode strings as Base64 strings</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo test</span>|base64
<span class="c">#dGVzdAo=</span>
</code></pre></div></div>

<h5 id="get-parent-directory-of-current-directory">Get parent directory of current directory</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">dirname</span> <span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>
</code></pre></div></div>

<h5 id="read-gz-file-without-extracting">Read .gz file without extracting</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>zmore filename

<span class="c"># or</span>
zless filename
</code></pre></div></div>

<h5 id="run-command-in-background-output-error-file">Run command in background, output error file</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>some_commands  &amp;&gt;log &amp;

<span class="c"># or</span>
some_commands 2&gt;log &amp;

<span class="c"># or</span>
some_commands 2&gt;&amp;1| <span class="nb">tee </span>logfile

<span class="c"># or</span>
some_commands |&amp; <span class="nb">tee </span>logfile

<span class="c"># or</span>
some_commands 2&gt;&amp;1 <span class="o">&gt;&gt;</span>outfile
<span class="c">#0: standard input; 1: standard output; 2: standard error</span>
</code></pre></div></div>

<h5 id="run-multiple-commands-in-background">Run multiple commands in background</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># run sequentially</span>
<span class="o">(</span><span class="nb">sleep </span>2<span class="p">;</span> <span class="nb">sleep </span>3<span class="o">)</span> &amp;

<span class="c"># run parallelly</span>
<span class="nb">sleep </span>2 &amp; <span class="nb">sleep </span>3 &amp;
</code></pre></div></div>

<h5 id="run-process-even-when-logout-immune-to-hangups-with-output-to-a-non-tty">Run process even when logout (immune to hangups, with output to a non-tty)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># e.g. Run myscript.sh even when log out.</span>
<span class="nb">nohup </span>bash myscript.sh
</code></pre></div></div>

<h5 id="send-mail">Send mail</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s1">'heres the content'</span>| mail <span class="nt">-a</span> /path/to/attach_file.txt <span class="nt">-s</span> <span class="s1">'mail.subject'</span> me@gmail.com
<span class="c"># use -a flag to set send from (-a "From: some@mail.tld")</span>
</code></pre></div></div>

<h5 id="convert-xls-to-csv">Convert .xls to csv</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xls2csv filename
</code></pre></div></div>

<h5 id="make-beep-sound">Make BEEP sound</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>speaker-test <span class="nt">-t</span> sine <span class="nt">-f</span> 1000 <span class="nt">-l1</span>
</code></pre></div></div>

<h5 id="set-beep-duration">Set beep duration</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">(</span>speaker-test <span class="nt">-t</span> sine <span class="nt">-f</span> 1000<span class="o">)</span> &amp; <span class="nv">pid</span><span class="o">=</span><span class="nv">$!</span><span class="p">;</span><span class="nb">sleep </span>0.1s<span class="p">;</span><span class="nb">kill</span> <span class="nt">-9</span> <span class="nv">$pid</span>
</code></pre></div></div>

<h5 id="editing-your-history">Editing your history</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">history</span> <span class="nt">-w</span>
vi ~/.bash_history
<span class="nb">history</span> <span class="nt">-r</span>

<span class="c">#or</span>
<span class="nb">history</span> <span class="nt">-d</span> <span class="o">[</span>line_number]
</code></pre></div></div>

<h5 id="interacting-with-history">Interacting with history</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># list 5 previous command (similar to `history |tail -n 5` but wont print the history command itself)</span>
<span class="nb">fc</span> <span class="nt">-l</span> <span class="nt">-5</span>
</code></pre></div></div>

<h5 id="delete-current-bash-command">Delete current bash command</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Ctrl+U

<span class="c"># or</span>
Ctrl+C

<span class="c"># or</span>
Alt+Shift+#
<span class="c"># to make it to history</span>
</code></pre></div></div>

<h5 id="add-something-to-history-eg-addmetohistory">Add something to history (e.g. “addmetohistory”)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># addmetodistory</span>
<span class="c"># just add a "#" before~~</span>
</code></pre></div></div>

<h5 id="get-last-historyrecord-filename">Get last history/record filename</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">head</span> <span class="o">!</span><span class="err">$</span>
</code></pre></div></div>

<h5 id="clean-screen">Clean screen</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>clear
<span class="c"># or simply Ctrl+l</span>
</code></pre></div></div>

<h5 id="sleep-awhile-or-wait-for-a-moment-or-schedule-a-job">Sleep awhile or wait for a moment or schedule a job</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sleep </span>5<span class="p">;</span><span class="nb">echo </span>hi
</code></pre></div></div>

<h5 id="backup-with-rsync">Backup with rsync</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rsync <span class="nt">-av</span> filename filename.bak
rsync <span class="nt">-av</span> directory directory.bak
rsync <span class="nt">-av</span> <span class="nt">--ignore_existing</span> directory/ directory.bak
rsync <span class="nt">-av</span> <span class="nt">--update</span> directory directory.bak

rsync <span class="nt">-av</span> directory user@ip_address:/path/to/directory.bak
<span class="c"># skip files that are newer on receiver (i prefer this one!)</span>
</code></pre></div></div>

<h5 id="make-all-directories-at-one-time">Make all directories at one time!</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> project/<span class="o">{</span>lib/ext,bin,src,doc/<span class="o">{</span>html,info,pdf<span class="o">}</span>,demo/stat<span class="o">}</span>
<span class="c"># -p: make parent directory</span>
<span class="c"># this will create project/doc/html/; project/doc/info; project/lib/ext ,etc</span>
</code></pre></div></div>

<h5 id="run-command-only-if-another-command-returns-zero-exit-status-well-done">Run command only if another command returns zero exit status (well done)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>tmp/ <span class="o">&amp;&amp;</span> <span class="nb">tar </span>xvf ~/a.tar
</code></pre></div></div>

<h5 id="run-command-only-if-another-command-returns-non-zero-exit-status-not-finish">Run command only if another command returns non-zero exit status (not finish)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>tmp/a/b/c <span class="o">||</span><span class="nb">mkdir</span> <span class="nt">-p</span> tmp/a/b/c
</code></pre></div></div>

<h5 id="use-backslash--to-break-long-command">Use backslash “" to break long command</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>tmp/a/b/c <span class="se">\</span>
<span class="o">&gt;</span> <span class="o">||</span> <span class="se">\</span>
<span class="o">&gt;</span><span class="nb">mkdir</span> <span class="nt">-p</span> tmp/a/b/c
</code></pre></div></div>

<h5 id="list-file-type-of-file-eg-tmp">List file type of file (e.g. /tmp/)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>file /tmp/
<span class="c"># tmp/: directory</span>
</code></pre></div></div>

<h5 id="writing-bash-script--is-called-shebang-">Writing Bash script (‘#!’’ is called shebang )</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nv">file</span><span class="o">=</span><span class="k">${</span><span class="nv">1</span><span class="p">#*.</span><span class="k">}</span>
<span class="c"># remove string before a "."</span>
</code></pre></div></div>

<h5 id="python-simple-http-server">Python simple HTTP Server</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python <span class="nt">-m</span> SimpleHTTPServer
<span class="c"># or when using python3:</span>
python3 <span class="nt">-m</span> http.server
</code></pre></div></div>

<h5 id="read-user-input">Read user input</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">read </span>input
<span class="nb">echo</span> <span class="nv">$input</span>
</code></pre></div></div>

<h5 id="array">Array</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">declare</span> <span class="nt">-a</span> <span class="nv">array</span><span class="o">=()</span>

<span class="c"># or</span>
<span class="nb">declare </span><span class="nv">array</span><span class="o">=()</span>

<span class="c"># or associative array</span>
<span class="nb">declare</span> <span class="nt">-A</span> <span class="nv">array</span><span class="o">=()</span>
</code></pre></div></div>

<h5 id="send-a-directory">Send a directory</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scp <span class="nt">-r</span> directoryname user@ip:/path/to/send
</code></pre></div></div>

<h5 id="fork-bomb">Fork bomb</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Don't try this at home!</span>
<span class="c"># It is a function that calls itself twice every call until you run out of system resources.</span>
<span class="c"># A '# ' is added in front for safety reason, remove it when seriously you are testing it.</span>
<span class="c"># :(){:|:&amp;};:</span>
</code></pre></div></div>

<h5 id="use-the-last-argument">Use the last argument</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">!</span><span class="err">$</span>
</code></pre></div></div>

<h5 id="check-last-exit-code">Check last exit code</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="nv">$?</span>
</code></pre></div></div>

<h5 id="extract-xf">Extract .xf</h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>unxz filename.tar.xz
# then
tar -xf filename.tar
</code></pre></div></div>

<h5 id="unzip-tarbz2-file-eg-filetarbz2">Unzip tar.bz2 file (e.g. file.tar.bz2)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tar </span>xvfj file.tar.bz2
</code></pre></div></div>

<h5 id="unzip-tarxz-file-eg-filetarxz">Unzip tar.xz file (e.g. file.tar.xz)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>unxz file.tar.xz
<span class="nb">tar </span>xopf file.tar
</code></pre></div></div>
<h5 id="extract-to-a-path">Extract to a path</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tar </span>xvf <span class="nt">-C</span> /path/to/directory filename.gz
</code></pre></div></div>

<h5 id="output-a-yn-repeatedly-until-killed">Output a y/n repeatedly until killed</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 'y':</span>
<span class="nb">yes</span>

<span class="c"># or 'n':</span>
<span class="nb">yes </span>n

<span class="c"># or 'anything':</span>
<span class="nb">yes </span>anything

<span class="c"># For example:</span>
<span class="sb">```</span>bash
<span class="nb">yes</span> | <span class="nb">rm</span> <span class="nt">-r</span> large_directory
</code></pre></div></div>

<h5 id="create-large-dummy-file-of-certain-size-instantly-eg-10gib">Create large dummy file of certain size instantly (e.g. 10GiB)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fallocate <span class="nt">-l</span> 10G 10Gigfile
</code></pre></div></div>

<h5 id="create-dummy-file-of-certain-size-eg-200mb">Create dummy file of certain size (e.g. 200mb)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">dd </span><span class="k">if</span><span class="o">=</span>/dev/zero <span class="nv">of</span><span class="o">=</span>//dev/shm/200m <span class="nv">bs</span><span class="o">=</span>1024k <span class="nv">count</span><span class="o">=</span>200
<span class="c"># or</span>
<span class="nb">dd </span><span class="k">if</span><span class="o">=</span>/dev/zero <span class="nv">of</span><span class="o">=</span>//dev/shm/200m <span class="nv">bs</span><span class="o">=</span>1M <span class="nv">count</span><span class="o">=</span>200

<span class="c"># Standard output:</span>
<span class="c"># 200+0 records in</span>
<span class="c"># 200+0 records out</span>
<span class="c"># 209715200 bytes (210 MB) copied, 0.0955679 s, 2.2 GB/s</span>
</code></pre></div></div>

<h5 id="keep-repeatedly-executing-the-same-command-eg-repeat-wc--l-filename-every-1-second">Keep /repeatedly executing the same command (e.g Repeat ‘wc -l filename’ every 1 second)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>watch <span class="nt">-n</span> 1 <span class="nb">wc</span> <span class="nt">-l</span> filename
</code></pre></div></div>

<h5 id="print-commands-and-their-arguments-when-execute-eg-echo-expr-10--20-">Print commands and their arguments when execute (e.g. echo <code class="language-plaintext highlighter-rouge">expr 10 + 20 </code>)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">set</span> <span class="nt">-x</span><span class="p">;</span> <span class="nb">echo</span> <span class="sb">`</span><span class="nb">expr </span>10 + 20 <span class="sb">`</span>
</code></pre></div></div>

<h5 id="print-some-meaningful-sentences-to-you-install-fortune-first">Print some meaningful sentences to you (install fortune first)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fortune
</code></pre></div></div>

<h5 id="colorful-and-useful-version-of-top-install-htop-first">Colorful (and useful) version of top (install htop first)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>htop
</code></pre></div></div>

<h5 id="press-any-key-to-continue">Press any key to continue</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">read</span> <span class="nt">-rsp</span> <span class="s1">$'Press any key to continue...</span><span class="se">\n</span><span class="s1">'</span> <span class="nt">-n1</span> key
</code></pre></div></div>

<h5 id="run-sql-like-command-on-files-from-terminal">Run sql-like command on files from terminal</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># download:</span>
<span class="c"># https://github.com/harelba/q</span>
<span class="c"># example:</span>
q <span class="nt">-d</span> <span class="s2">","</span> <span class="s2">"select c3,c4,c5 from /path/to/file.txt where c3='foo' and c5='boo'"</span>
</code></pre></div></div>

<h5 id="using-screen-for-multiple-terminal-sessions">Using Screen for multiple terminal sessions</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create session and attach:</span>
screen

<span class="c"># Create detached session foo:</span>
screen <span class="nt">-S</span> foo <span class="nt">-d</span> <span class="nt">-m</span>

<span class="c"># Detached session foo:</span>
screen: ^a^d

<span class="c"># List sessions:</span>
screen <span class="nt">-ls</span>

<span class="c"># Attach last session:</span>
screen <span class="nt">-r</span>

<span class="c"># Attach to session foo:</span>
screen <span class="nt">-r</span> foo

<span class="c"># Kill session foo:</span>
screen <span class="nt">-r</span> foo <span class="nt">-X</span> quit

<span class="c"># Scroll:</span>
Hit your screen prefix combination <span class="o">(</span>C-a / control+A<span class="o">)</span>, <span class="k">then </span>hit Escape.
Move up/down with the arrow keys <span class="o">(</span>↑ and ↓<span class="o">)</span><span class="nb">.</span>

<span class="c"># Redirect output of an already running process in Screen:</span>
 <span class="o">(</span>C-a / control+A<span class="o">)</span>, <span class="k">then </span>hit <span class="s1">'H'</span>

<span class="c"># Store screen output for Screen:</span>
Ctrl+A, Shift+H
<span class="c"># You will then find a screen.log file under current directory.</span>
</code></pre></div></div>

<h5 id="using-tmux-for-multiple-terminal-sessions">Using Tmux for multiple terminal sessions</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create session and attach:</span>
tmux

<span class="c"># Attach to session foo:</span>
tmux attach <span class="nt">-t</span> foo

<span class="c"># Detached session foo:</span>
^bd

<span class="c"># List sessions:</span>
tmux <span class="nb">ls</span>

<span class="c"># Attach last session:</span>
tmux attach

<span class="c"># Kill session foo:</span>
tmux kill-session <span class="nt">-t</span> foo

<span class="c"># Create detached session foo:</span>
tmux new <span class="nt">-s</span> foo <span class="nt">-d</span>

<span class="c"># Send command to all panes in tmux:</span>
Ctrl-B
:setw synchronize-panes

<span class="c"># Some tmux pane control commands:</span>
Ctrl-B
<span class="c">#   Panes (splits), Press Ctrl+B, then input the following symbol:</span>
<span class="c">#   %  horizontal split</span>
<span class="c">#   "  vertical split</span>
<span class="c">#   o  swap panes</span>
<span class="c">#   q  show pane numbers</span>
<span class="c">#   x  kill pane</span>
<span class="c">#   space - toggle between layouts</span>

<span class="c">#   Distribute Vertically (rows):</span>
<span class="k">select</span><span class="nt">-layout</span> even-vertical
<span class="c">#   or</span>
Ctrl+b, Alt+2

<span class="c"># Distribute horizontally (columns):</span>
<span class="k">select</span><span class="nt">-layout</span> even-horizontal
<span class="c">#   or</span>
Ctrl+b, Alt+1

<span class="c"># Scroll</span>
Ctrl-b <span class="k">then</span> <span class="se">\[</span> <span class="k">then </span>you can use your normal navigation keys to scroll around.
Press q to quit scroll mode.
</code></pre></div></div>

<h5 id="pass-password-to-ssh">Pass password to ssh</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sshpass <span class="nt">-p</span> mypassword ssh root@10.102.14.88 <span class="s2">"df -h"</span>
</code></pre></div></div>

<h5 id="wait-for-a-pid-job-to-complete">Wait for a pid (job) to complete</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">wait</span> %1
<span class="c"># or</span>
<span class="nb">wait</span> <span class="nv">$PID</span>
<span class="nb">wait</span> <span class="k">${</span><span class="p">!</span><span class="k">}</span>
<span class="c">#wait ${!} to wait till the last background process ($! is the PID of the last background process)</span>
</code></pre></div></div>

<h5 id="convert-pdf-to-txt">Convert pdf to txt</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>poppler-utils
pdftotext example.pdf example.txt
</code></pre></div></div>

<h5 id="list-only-directory">List only directory</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span> <span class="nt">-ld</span> <span class="nt">--</span> <span class="k">*</span>/
</code></pre></div></div>

<h5 id="capturerecordsave-terminal-output-capture-everything-you-type-and-output">Capture/record/save terminal output (capture everything you type and output)</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>script output.txt
<span class="c"># start using terminal</span>
<span class="c"># to logout the screen session (stop saving the contents), type exit.</span>
</code></pre></div></div>

<h5 id="list-contents-of-directories-in-a-tree-like-format">List contents of directories in a tree-like format.</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tree
<span class="c"># go to the directory you want to list, and type tree (sudo apt-get install tree)</span>
<span class="c"># output:</span>
<span class="c"># home/</span>
<span class="c"># └── project</span>
<span class="c">#     ├── 1</span>
<span class="c">#     ├── 2</span>
<span class="c">#     ├── 3</span>
<span class="c">#     ├── 4</span>
<span class="c">#     └── 5</span>
<span class="c">#</span>

<span class="c"># set level directories deep (e.g. level 1)</span>
tree <span class="nt">-L</span> 1
<span class="c"># home/</span>
<span class="c"># └── project</span>
</code></pre></div></div>

<h5 id="set-up-virtualenvsandbox-for-python">Set up virtualenv(sandbox) for python</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. install virtualenv.</span>
<span class="nb">sudo </span>apt-get <span class="nb">install </span>virtualenv
<span class="c"># 2. Create a directory (name it .venv or whatever name your want) for your new shiny isolated environment.</span>
virtualenv .venv
<span class="c"># 3. source virtual bin</span>
<span class="nb">source</span> .venv/bin/activate
<span class="c"># 4. you can check check if you are now inside a sandbox.</span>
<span class="nb">type </span>pip
<span class="c"># 5. Now you can install your pip package, here requirements.txt is simply a txt file containing all the packages you want. (e.g tornado==4.5.3).</span>
pip <span class="nb">install</span> <span class="nt">-r</span> requirements.txt
</code></pre></div></div>

<blockquote>
  <p>More coming!!</p>
</blockquote>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/onceupon/Bash-Oneliner">Bash-Oneliner</a> is maintained by <a href="https://github.com/onceupon">onceupon</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </section>

    
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-88670245-2', 'auto');
        ga('send', 'pageview');
      </script>
    
  </body>
</html>
